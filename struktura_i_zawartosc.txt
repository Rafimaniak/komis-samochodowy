Eksport struktury katalogów i plików
Wygenerowano: 11/25/2025 16:09:17



ŒCIE¯KA: src\main\java\pl\komis\KomisApplication.java
--------------------------------------------------------
package pl.komis;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;

@SpringBootApplication
public class KomisApplication {

    public static void main(String[] args) {
//        // Tymczasowe generowanie haseÅ‚
//        BCryptPasswordEncoder encoder = new BCryptPasswordEncoder();
//
//        System.out.println("=== GENEROWANIE HASEÅ BCrypt ===");
//        System.out.println("admin: " + encoder.encode("admin"));
//        System.out.println("user: " + encoder.encode("user"));
//        System.out.println("testowy: " + encoder.encode("testowy"));
//        System.out.println("=== KONIEC ===");

        SpringApplication.run(KomisApplication.class, args);
    }
}


ŒCIE¯KA: src\main\java\pl\komis\config\DataLoader.java
---------------------------------------------------------
package pl.komis.config;

import lombok.RequiredArgsConstructor;
import org.springframework.boot.CommandLineRunner;
import org.springframework.stereotype.Component;
import pl.komis.model.Samochod;
import pl.komis.repository.SamochodRepository;

import java.math.BigDecimal;
import java.time.LocalDate;

@Component
@RequiredArgsConstructor
public class DataLoader implements CommandLineRunner {

    private final SamochodRepository samochodRepository;

    @Override
    public void run(String... args) {
        if (samochodRepository.count() == 0) {
            // Dodaj samochody z wszystkimi wymaganymi polami
            Samochod s1 = new Samochod();
            s1.setMarka("BMW");
            s1.setModel("Seria 3");
            s1.setRokProdukcji(2020);
            s1.setPrzebieg(50000);
            s1.setPojemnoscSilnika(2.0);
            s1.setRodzajPaliwa("Benzyna");
            s1.setSkrzyniaBiegow("Automatyczna");
            s1.setKolor("Czarny");
            s1.setCena(new BigDecimal("120000"));
            s1.setStatus("DOSTEPNY");
            s1.setDataDodania(LocalDate.now());

            Samochod s2 = new Samochod();
            s2.setMarka("Audi");
            s2.setModel("A4");
            s2.setRokProdukcji(2019);
            s2.setPrzebieg(60000);
            s2.setPojemnoscSilnika(2.0);
            s2.setRodzajPaliwa("Diesel");
            s2.setSkrzyniaBiegow("Manualna");
            s2.setKolor("BiaÅ‚y");
            s2.setCena(new BigDecimal("95000"));
            s2.setStatus("DOSTEPNY");
            s2.setDataDodania(LocalDate.now());

            samochodRepository.save(s1);
            samochodRepository.save(s2);

            System.out.println("Dodano samochody do bazy!");
        }
    }
}


ŒCIE¯KA: src\main\java\pl\komis\config\SecurityConfig.java
-------------------------------------------------------------
package pl.komis.config;

import lombok.RequiredArgsConstructor;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.security.web.SecurityFilterChain;
import org.springframework.security.web.util.matcher.AntPathRequestMatcher;
import pl.komis.service.CustomUserDetailsService;

@Configuration
@EnableWebSecurity
@RequiredArgsConstructor
public class SecurityConfig {

    private final CustomUserDetailsService customUserDetailsService;

    @Bean
    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
        http
                .authorizeHttpRequests(auth -> auth
                        // Strony publiczne - dostÄ™pne bez logowania
                        .requestMatchers("/", "/css/**", "/js/**", "/images/**", "/api/**",
                                "/samochody", "/samochody/szczegoly", "/register",
                                "/search", "/search/**", "/search/quick", "/search/quick/**").permitAll() // DODANO BRAKUJÄ„CE ENDPOINTY

                        // Strony admina - wymagajÄ… roli ADMIN
                        .requestMatchers("/admin/**").hasRole("ADMIN")
                        .requestMatchers("/klienci", "/pracownicy").hasRole("ADMIN")
                        .requestMatchers("/samochody/nowy", "/samochody/edytuj/**",
                                "/samochody/zapisz", "/samochody/usun/**").hasRole("ADMIN")

                        // Wszystkie inne strony wymagajÄ… logowania
                        .anyRequest().authenticated()
                )
                .formLogin(form -> form
                        .loginPage("/login")
                        .defaultSuccessUrl("/samochody", true)
                        .permitAll()
                )
                .logout(logout -> logout
                        .logoutRequestMatcher(new AntPathRequestMatcher("/logout"))
                        .logoutSuccessUrl("/?logout=true")
                        .invalidateHttpSession(true)
                        .deleteCookies("JSESSIONID")
                        .permitAll()
                )
                .userDetailsService(customUserDetailsService);

        return http.build();
    }

    @Bean
    public PasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder();
    }
}


ŒCIE¯KA: src\main\java\pl\komis\controller\AdminController.java
------------------------------------------------------------------
package pl.komis.controller;

import lombok.RequiredArgsConstructor;
import org.springframework.security.access.prepost.PreAuthorize;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import pl.komis.service.SamochodService;
import pl.komis.service.UserService;

@Controller
@RequestMapping("/admin")
@PreAuthorize("hasRole('ADMIN')")
@RequiredArgsConstructor
public class AdminController {

    private final UserService userService;
    private final SamochodService samochodService;

    @GetMapping
    public String adminPanel(Model model) {
        long totalUsers = userService.count();
        long totalCars = samochodService.count();
        long availableCars = samochodService.countByStatus("DOSTEPNY");

        model.addAttribute("totalUsers", totalUsers);
        model.addAttribute("totalCars", totalCars);
        model.addAttribute("availableCars", availableCars);
        model.addAttribute("tytul", "Panel Administracyjny");

        return "admin/panel";
    }
}


ŒCIE¯KA: src\main\java\pl\komis\controller\AdminUserController.java
----------------------------------------------------------------------
package pl.komis.controller;

import lombok.RequiredArgsConstructor;
import org.springframework.security.access.prepost.PreAuthorize;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.servlet.mvc.support.RedirectAttributes;
import pl.komis.model.User;
import pl.komis.service.UserService;

import java.util.Arrays;
import java.util.List;

@Controller
@RequestMapping("/admin/users")
@PreAuthorize("hasRole('ADMIN')")
@RequiredArgsConstructor
public class AdminUserController {

    private final UserService userService;
    private final PasswordEncoder passwordEncoder;

    @GetMapping
    public String listUsers(Model model) {
        List<User> users = userService.findAllUsers();
        model.addAttribute("users", users);
        model.addAttribute("tytul", "ZarzÄ…dzanie uÅ¼ytkownikami");
        return "admin/users";
    }

    @GetMapping("/create")
    public String showCreateForm(Model model) {
        model.addAttribute("user", new User());
        model.addAttribute("tytul", "Dodaj nowego uÅ¼ytkownika");
        model.addAttribute("roles", Arrays.asList("USER", "ADMIN"));
        return "admin/user-form";
    }

    @PostMapping("/create")
    public String createUser(@ModelAttribute User user,
                             @RequestParam("password") String password,
                             @RequestParam("role") String role,
                             RedirectAttributes redirectAttributes) {
        try {
            userService.createUserByAdmin(user, password, role);
            redirectAttributes.addFlashAttribute("successMessage", "UÅ¼ytkownik zostaÅ‚ utworzony pomyÅ›lnie");
        } catch (Exception e) {
            redirectAttributes.addFlashAttribute("errorMessage", "BÅ‚Ä…d podczas tworzenia uÅ¼ytkownika: " + e.getMessage());
        }
        return "redirect:/admin/users";
    }

    @GetMapping("/edit/{id}")
    public String showEditForm(@PathVariable("id") Long id, Model model) {
        User user = userService.findById(id)
                .orElseThrow(() -> new RuntimeException("UÅ¼ytkownik nie znaleziony"));
        model.addAttribute("user", user);
        model.addAttribute("tytul", "Edytuj uÅ¼ytkownika");
        model.addAttribute("roles", Arrays.asList("USER", "ADMIN"));
        return "admin/user-form";
    }

    @PostMapping("/edit/{id}")
    public String updateUser(@PathVariable("id") Long id,
                             @ModelAttribute User user,
                             @RequestParam(value = "newPassword", required = false) String newPassword,
                             RedirectAttributes redirectAttributes) {
        try {
            User existingUser = userService.findById(id)
                    .orElseThrow(() -> new RuntimeException("UÅ¼ytkownik nie znaleziony"));

            existingUser.setUsername(user.getUsername());
            existingUser.setEmail(user.getEmail());
            existingUser.setRole(user.getRole());
            existingUser.setEnabled(user.getEnabled());

            // Zmiana hasÅ‚a jeÅ›li podano nowe
            if (newPassword != null && !newPassword.trim().isEmpty()) {
                existingUser.setPassword(passwordEncoder.encode(newPassword));
            }

            userService.updateUser(existingUser);
            redirectAttributes.addFlashAttribute("successMessage", "UÅ¼ytkownik zostaÅ‚ zaktualizowany pomyÅ›lnie");
        } catch (Exception e) {
            redirectAttributes.addFlashAttribute("errorMessage", "BÅ‚Ä…d podczas aktualizacji uÅ¼ytkownika: " + e.getMessage());
        }
        return "redirect:/admin/users";
    }

    @GetMapping("/change-password/{id}")
    public String showChangePasswordForm(@PathVariable("id") Long id, Model model) {
        User user = userService.findById(id)
                .orElseThrow(() -> new RuntimeException("UÅ¼ytkownik nie znaleziony"));
        model.addAttribute("user", user);
        model.addAttribute("tytul", "Zmiana hasÅ‚a uÅ¼ytkownika");
        return "admin/change-password";
    }

    @PostMapping("/change-password/{id}")
    public String changePassword(@PathVariable("id") Long id,
                                 @RequestParam("newPassword") String newPassword,
                                 @RequestParam("confirmPassword") String confirmPassword,
                                 RedirectAttributes redirectAttributes) {
        try {
            if (!newPassword.equals(confirmPassword)) {
                redirectAttributes.addFlashAttribute("errorMessage", "HasÅ‚a nie sÄ… identyczne");
                return "redirect:/admin/users/change-password/" + id;
            }

            User user = userService.findById(id)
                    .orElseThrow(() -> new RuntimeException("UÅ¼ytkownik nie znaleziony"));

            user.setPassword(passwordEncoder.encode(newPassword));
            userService.updateUser(user);

            redirectAttributes.addFlashAttribute("successMessage", "HasÅ‚o zostaÅ‚o zmienione pomyÅ›lnie");
        } catch (Exception e) {
            redirectAttributes.addFlashAttribute("errorMessage", "BÅ‚Ä…d podczas zmiany hasÅ‚a: " + e.getMessage());
        }
        return "redirect:/admin/users";
    }

    @PostMapping("/toggle-status/{id}")
    public String toggleUserStatus(@PathVariable("id") Long id, RedirectAttributes redirectAttributes) {
        try {
            User user = userService.findById(id)
                    .orElseThrow(() -> new RuntimeException("UÅ¼ytkownik nie znaleziony"));

            user.setEnabled(!user.getEnabled());
            userService.updateUser(user);

            String status = user.getEnabled() ? "aktywowane" : "dezaktywowane";
            redirectAttributes.addFlashAttribute("successMessage",
                    "Konto uÅ¼ytkownika " + user.getUsername() + " zostaÅ‚o " + status);
        } catch (Exception e) {
            redirectAttributes.addFlashAttribute("errorMessage", "BÅ‚Ä…d podczas zmiany statusu uÅ¼ytkownika: " + e.getMessage());
        }
        return "redirect:/admin/users";
    }

    @PostMapping("/delete/{id}")
    public String deleteUser(@PathVariable("id") Long id, RedirectAttributes redirectAttributes) {
        try {
            User user = userService.findById(id)
                    .orElseThrow(() -> new RuntimeException("UÅ¼ytkownik nie znaleziony"));

            userService.deleteUser(id);
            redirectAttributes.addFlashAttribute("successMessage",
                    "UÅ¼ytkownik " + user.getUsername() + " zostaÅ‚ usuniÄ™ty pomyÅ›lnie");
        } catch (Exception e) {
            redirectAttributes.addFlashAttribute("errorMessage", "BÅ‚Ä…d podczas usuwania uÅ¼ytkownika: " + e.getMessage());
        }
        return "redirect:/admin/users";
    }
}


ŒCIE¯KA: src\main\java\pl\komis\controller\KlientController.java
-------------------------------------------------------------------
package pl.komis.controller;

import lombok.RequiredArgsConstructor;
import org.springframework.security.access.prepost.PreAuthorize;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import pl.komis.model.User;
import pl.komis.service.UserService;

import java.util.List;
import java.util.stream.Collectors;

@Controller
@RequiredArgsConstructor
@PreAuthorize("hasRole('ADMIN')")
public class KlientController {

    private final UserService userService;

    @GetMapping("/klienci")
    public String listaKlientow(Model model) {
        // Pobierz wszystkich uÅ¼ytkownikÃ³w z rolÄ… USER
        List<User> klienci = userService.findAllUsers().stream()
                .filter(user -> "USER".equals(user.getRole()))
                .collect(Collectors.toList());

        model.addAttribute("klienci", klienci);
        model.addAttribute("tytul", "Lista KlientÃ³w");
        return "klienci";
    }
}


ŒCIE¯KA: src\main\java\pl\komis\controller\KlientPromocjaController.java
---------------------------------------------------------------------------
package pl.komis.controller;

import lombok.RequiredArgsConstructor;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;
import pl.komis.model.KlientPromocja;
import pl.komis.service.KlientPromocjaService;

import java.util.List;

@RestController
@RequestMapping("/api/klient-promocje")
@RequiredArgsConstructor
public class KlientPromocjaController {

    private final KlientPromocjaService klientPromocjaService;

    @GetMapping
    public List<KlientPromocja> getAll() {
        return klientPromocjaService.findAll();
    }

    @GetMapping("/{id}")
    public ResponseEntity<KlientPromocja> getById(@PathVariable Long id) {
        return ResponseEntity.ok(klientPromocjaService.findById(id));
    }

    @PostMapping("/assign/{idKlienta}/{idPromocji}")
    public ResponseEntity<KlientPromocja> assign(@PathVariable Long idKlienta,
                                                 @PathVariable Long idPromocji) {
        return ResponseEntity.ok(
                klientPromocjaService.assignPromotion(idKlienta, idPromocji)
        );
    }

    @DeleteMapping("/{id}")
    public ResponseEntity<Void> delete(@PathVariable Long id) {
        klientPromocjaService.remove(id);
        return ResponseEntity.noContent().build();
    }

    @GetMapping("/by-klient/{idKlienta}")
    public List<KlientPromocja> byKlient(@PathVariable Long idKlienta) {
        return klientPromocjaService.findByKlientId(idKlienta);
    }

    @GetMapping("/by-promocja/{idPromocji}")
    public List<KlientPromocja> byPromocja(@PathVariable Long idPromocji) {
        return klientPromocjaService.findByPromocjaId(idPromocji);
    }
}



ŒCIE¯KA: src\main\java\pl\komis\controller\LoginController.java
------------------------------------------------------------------
package pl.komis.controller;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;

@Controller
public class LoginController {

    @GetMapping("/login")
    public String login() {
        return "login";
    }
}


ŒCIE¯KA: src\main\java\pl\komis\controller\PracownikController.java
----------------------------------------------------------------------
package pl.komis.controller;

import lombok.RequiredArgsConstructor;
import org.springframework.security.access.prepost.PreAuthorize;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import pl.komis.model.User;
import pl.komis.service.UserService;

import java.util.List;
import java.util.stream.Collectors;

@Controller
@RequiredArgsConstructor
@PreAuthorize("hasRole('ADMIN')")
public class PracownikController {

    private final UserService userService;

    @GetMapping("/pracownicy")
    public String listaPracownikow(Model model) {
        // Pobierz wszystkich uÅ¼ytkownikÃ³w z rolÄ… ADMIN
        List<User> pracownicy = userService.findAllUsers().stream()
                .filter(user -> "ADMIN".equals(user.getRole()))
                .collect(Collectors.toList());

        model.addAttribute("pracownicy", pracownicy);
        model.addAttribute("tytul", "Lista PracownikÃ³w");
        return "pracownicy";
    }
}


ŒCIE¯KA: src\main\java\pl\komis\controller\PromocjaController.java
---------------------------------------------------------------------
package pl.komis.controller;

import lombok.RequiredArgsConstructor;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;
import pl.komis.model.Promocja;
import pl.komis.service.PromocjaService;

import java.util.List;
import java.util.NoSuchElementException;

@RestController
@RequestMapping("/api/promocje")
@RequiredArgsConstructor
public class PromocjaController {

    private final PromocjaService promocjaService;

    @GetMapping
    public List<Promocja> getAll() {
        return promocjaService.findAll();
    }

    @GetMapping("/{id}")
    public ResponseEntity<Promocja> getById(@PathVariable Long id) {
        try {
            return ResponseEntity.ok(promocjaService.getById(id));
        } catch (NoSuchElementException e) {
            return ResponseEntity.notFound().build();
        }
    }

    @PostMapping
    public ResponseEntity<Promocja> create(@RequestBody Promocja p) {
        Promocja created = promocjaService.save(p);
        return ResponseEntity.ok(created);
    }

    @PutMapping("/{id}")
    public ResponseEntity<Promocja> update(@PathVariable Long id, @RequestBody Promocja p) {
        try {
            Promocja updated = promocjaService.update(id, p);
            return ResponseEntity.ok(updated);
        } catch (NoSuchElementException e) {
            return ResponseEntity.notFound().build();
        }
    }

    @DeleteMapping("/{id}")
    public ResponseEntity<Void> delete(@PathVariable Long id) {
        try {
            promocjaService.remove(id);
            return ResponseEntity.noContent().build();
        } catch (NoSuchElementException e) {
            return ResponseEntity.notFound().build();
        }
    }

    @GetMapping("/aktywne")
    public List<Promocja> getActive() {
        return promocjaService.findActive();
    }
}



ŒCIE¯KA: src\main\java\pl\komis\controller\RegisterController.java
---------------------------------------------------------------------
package pl.komis.controller;

import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.servlet.mvc.support.RedirectAttributes;
import pl.komis.dto.RegisterRequest;
import pl.komis.model.User;
import pl.komis.service.UserService;

import jakarta.validation.Valid;

@Controller
@RequiredArgsConstructor
public class RegisterController {

    private final UserService userService;

    @GetMapping("/register")
    public String showRegistrationForm(Model model) {
        model.addAttribute("registerRequest", new RegisterRequest());
        model.addAttribute("tytul", "Rejestracja - Komis Samochodowy");
        return "register";
    }

    @PostMapping("/register")
    public String registerUser(@Valid @ModelAttribute RegisterRequest registerRequest,
                               BindingResult bindingResult,
                               Model model,
                               RedirectAttributes redirectAttributes) {

        // Walidacja podstawowa
        if (bindingResult.hasErrors()) {
            model.addAttribute("tytul", "Rejestracja - Komis Samochodowy");
            return "register";
        }

        // Walidacja hasÅ‚a
        if (!registerRequest.getPassword().equals(registerRequest.getConfirmPassword())) {
            bindingResult.rejectValue("confirmPassword", "error.registerRequest", "HasÅ‚a nie sÄ… identyczne");
            model.addAttribute("tytul", "Rejestracja - Komis Samochodowy");
            return "register";
        }

        // SprawdÅº czy uÅ¼ytkownik juÅ¼ istnieje
        if (userService.usernameExists(registerRequest.getUsername())) {
            bindingResult.rejectValue("username", "error.registerRequest", "Nazwa uÅ¼ytkownika jest juÅ¼ zajÄ™ta");
            model.addAttribute("tytul", "Rejestracja - Komis Samochodowy");
            return "register";
        }

        if (userService.emailExists(registerRequest.getEmail())) {
            bindingResult.rejectValue("email", "error.registerRequest", "Email jest juÅ¼ zajÄ™ty");
            model.addAttribute("tytul", "Rejestracja - Komis Samochodowy");
            return "register";
        }

        try {
            // StwÃ³rz nowego uÅ¼ytkownika
            User user = User.builder()
                    .username(registerRequest.getUsername())
                    .email(registerRequest.getEmail())
                    .role("USER")
                    .build();

            userService.registerUser(user, registerRequest.getPassword());

            redirectAttributes.addFlashAttribute("successMessage", "Konto zostaÅ‚o utworzone pomyÅ›lnie! MoÅ¼esz siÄ™ teraz zalogowaÄ‡.");
            return "redirect:/login";

        } catch (Exception e) {
            model.addAttribute("errorMessage", "WystÄ…piÅ‚ bÅ‚Ä…d podczas rejestracji: " + e.getMessage());
            model.addAttribute("tytul", "Rejestracja - Komis Samochodowy");
            return "register";
        }
    }
}


ŒCIE¯KA: src\main\java\pl\komis\controller\SamochodController.java
---------------------------------------------------------------------
package pl.komis.controller;

import lombok.RequiredArgsConstructor;
import org.springframework.security.access.prepost.PreAuthorize;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.*;
import pl.komis.model.Samochod;
import pl.komis.service.SamochodService;

import java.math.BigDecimal;
import java.time.LocalDate;
import java.util.List;

@Controller
@RequestMapping("/samochody")
@RequiredArgsConstructor
public class SamochodController {

    private final SamochodService samochodService;

    // Widok listy samochodÃ³w z wyszukiwarkÄ…
    @GetMapping
    public String listaSamochodow(
            @RequestParam(required = false) String marka,
            @RequestParam(required = false) String model,
            @RequestParam(required = false) String status,
            @RequestParam(required = false) Integer minRok,
            @RequestParam(required = false) Integer maxRok,
            @RequestParam(required = false) Integer minPrzebieg,
            @RequestParam(required = false) Integer maxPrzebieg,
            @RequestParam(required = false) BigDecimal minCena,
            @RequestParam(required = false) BigDecimal maxCena,
            Model modelAttr) {

        List<Samochod> samochody;

        // SprawdÅº czy sÄ… parametry wyszukiwania (uwzglÄ™dniajÄ…c puste stringi)
        boolean hasSearchParams = (marka != null && !marka.trim().isEmpty()) ||
                (model != null && !model.trim().isEmpty()) ||
                (status != null && !status.trim().isEmpty()) ||
                minRok != null || maxRok != null ||
                minPrzebieg != null || maxPrzebieg != null ||
                minCena != null || maxCena != null;

        if (hasSearchParams) {
            // UÅ¼yj zaawansowanego wyszukiwania
            SamochodService.SearchCriteria criteria = new SamochodService.SearchCriteria();
            criteria.setMarka(marka);
            criteria.setModel(model);
            criteria.setStatus(status);
            criteria.setMinRok(minRok);
            criteria.setMaxRok(maxRok);
            criteria.setMinPrzebieg(minPrzebieg);
            criteria.setMaxPrzebieg(maxPrzebieg);
            criteria.setMinCena(minCena);
            criteria.setMaxCena(maxCena);

            samochody = samochodService.searchCars(criteria);

            // DEBUG: SprawdÅº wyniki wyszukiwania
            System.out.println("DEBUG: Kryteria wyszukiwania: " + criteria);
            System.out.println("DEBUG: Znaleziono samochodÃ³w: " + samochody.size());
        } else {
            // PokaÅ¼ wszystkie samochody
            samochody = samochodService.findAll();
        }

        modelAttr.addAttribute("samochody", samochody);
        modelAttr.addAttribute("marki", samochodService.findAllMarki());
        modelAttr.addAttribute("tytul", "Lista SamochodÃ³w");
        modelAttr.addAttribute("hasSearchParams", hasSearchParams);

        // PrzekaÅ¼ parametry wyszukiwania z powrotem do formularza
        modelAttr.addAttribute("searchMarka", marka);
        modelAttr.addAttribute("searchModel", model);
        modelAttr.addAttribute("searchStatus", status);
        modelAttr.addAttribute("searchMinRok", minRok);
        modelAttr.addAttribute("searchMaxRok", maxRok);
        modelAttr.addAttribute("searchMinPrzebieg", minPrzebieg);
        modelAttr.addAttribute("searchMaxPrzebieg", maxPrzebieg);
        modelAttr.addAttribute("searchMinCena", minCena);
        modelAttr.addAttribute("searchMaxCena", maxCena);

        return "samochody/lista";
    }

    // PozostaÅ‚e metody pozostajÄ… bez zmian...
    @GetMapping("/szczegoly")
    public String szczegolySamochodu(@RequestParam("id") Long id, Model model) {
        Samochod samochod = samochodService.findById(id)
                .orElseThrow(() -> new RuntimeException("SamochÃ³d nie znaleziony"));
        model.addAttribute("samochod", samochod);
        model.addAttribute("tytul", samochod.getMarka() + " " + samochod.getModel());
        return "samochody/szczegoly";
    }

    // Formularz dodawania nowego samochodu - tylko ADMIN
    @GetMapping("/nowy")
    @PreAuthorize("hasRole('ADMIN')")
    public String formNowySamochod(Model model) {
        model.addAttribute("samochod", new Samochod());
        model.addAttribute("tytul", "Dodaj Nowy SamochÃ³d");
        return "samochody/form";
    }

    // Zapisywanie nowego samochodu - tylko ADMIN
    @PostMapping("/zapisz")
    @PreAuthorize("hasRole('ADMIN')")
    public String zapiszSamochod(@ModelAttribute Samochod samochod) {
        // Ustaw domyÅ›lne wartoÅ›ci dla brakujÄ…cych pÃ³l
        if (samochod.getDataDodania() == null) {
            samochod.setDataDodania(LocalDate.now());
        }
        if (samochod.getRodzajPaliwa() == null) {
            samochod.setRodzajPaliwa("Benzyna");
        }
        if (samochod.getSkrzyniaBiegow() == null) {
            samochod.setSkrzyniaBiegow("Manualna");
        }
        if (samochod.getPojemnoscSilnika() == null) {
            samochod.setPojemnoscSilnika(2.0);
        }

        samochodService.save(samochod);
        return "redirect:/samochody";
    }

    // Formularz edycji samochodu - tylko ADMIN
    @GetMapping("/edytuj")
    @PreAuthorize("hasRole('ADMIN')")
    public String formEdycjaSamochodu(@RequestParam("id") Long id, Model model) {
        Samochod samochod = samochodService.findById(id)
                .orElseThrow(() -> new RuntimeException("SamochÃ³d nie znaleziony"));
        model.addAttribute("samochod", samochod);
        model.addAttribute("tytul", "Edytuj SamochÃ³d");
        return "samochody/form";
    }

    // Aktualizacja samochodu - tylko ADMIN
    @PostMapping("/edytuj")
    @PreAuthorize("hasRole('ADMIN')")
    public String aktualizujSamochod(@RequestParam("id") Long id, @ModelAttribute Samochod samochod) {
        samochod.setId(id);
        samochodService.save(samochod);
        return "redirect:/samochody";
    }

    // Usuwanie samochodu - tylko ADMIN
    @PostMapping("/usun")
    @PreAuthorize("hasRole('ADMIN')")
    public String usunSamochod(@RequestParam("id") Long id) {
        samochodService.delete(id);
        return "redirect:/samochody";
    }

    // Rezerwacja samochodu - dla zalogowanych uÅ¼ytkownikÃ³w
    @PostMapping("/zarezerwuj")
    @PreAuthorize("isAuthenticated()")
    public String zarezerwujSamochod(@RequestParam("id") Long id) {
        Samochod samochod = samochodService.findById(id)
                .orElseThrow(() -> new RuntimeException("SamochÃ³d nie znaleziony"));

        if ("DOSTEPNY".equals(samochod.getStatus())) {
            samochod.setStatus("ZAREZERWOWANY");
            samochodService.save(samochod);
        }

        return "redirect:/samochody/szczegoly?id=" + id;
    }

    // Zakup samochodu - dla zalogowanych uÅ¼ytkownikÃ³w
    @PostMapping("/kup")
    @PreAuthorize("isAuthenticated()")
    public String kupSamochod(@RequestParam("id") Long id) {
        Samochod samochod = samochodService.findById(id)
                .orElseThrow(() -> new RuntimeException("SamochÃ³d nie znaleziony"));

        if ("DOSTEPNY".equals(samochod.getStatus()) || "ZAREZERWOWANY".equals(samochod.getStatus())) {
            samochod.setStatus("SPRZEDANY");
            samochodService.save(samochod);
        }

        return "redirect:/samochody/szczegoly?id=" + id;
    }

    // Anulowanie rezerwacji - dla zalogowanych uÅ¼ytkownikÃ³w
    @PostMapping("/anuluj-rezerwacje")
    @PreAuthorize("isAuthenticated()")
    public String anulujRezerwacje(@RequestParam("id") Long id) {
        Samochod samochod = samochodService.findById(id)
                .orElseThrow(() -> new RuntimeException("SamochÃ³d nie znaleziony"));

        if ("ZAREZERWOWANY".equals(samochod.getStatus())) {
            samochod.setStatus("DOSTEPNY");
            samochodService.save(samochod);
        }

        return "redirect:/samochody/szczegoly?id=" + id;
    }
}


ŒCIE¯KA: src\main\java\pl\komis\controller\SearchController.java
-------------------------------------------------------------------
// src\main\java\pl\komis\controller\SearchController.java

package pl.komis.controller;

import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import pl.komis.model.Samochod;
import pl.komis.service.SamochodService;

import java.util.List;

@Controller
@RequestMapping("/search")
@RequiredArgsConstructor
public class SearchController {

    private final SamochodService samochodService;

    @GetMapping
    public String showSearchForm(Model model) {
        model.addAttribute("searchCriteria", new SamochodService.SearchCriteria());
        model.addAttribute("marki", samochodService.findAllMarki());
        model.addAttribute("tytul", "Zaawansowane wyszukiwanie");
        return "search/form";
    }

    @PostMapping
    public String searchCars(@ModelAttribute SamochodService.SearchCriteria criteria, Model model) {
        List<Samochod> results = samochodService.searchCars(criteria);

        // DEBUG
        System.out.println("DEBUG Zaawansowane wyszukiwanie:");
        System.out.println("DEBUG - Marka: " + criteria.getMarka());
        System.out.println("DEBUG - Model: " + criteria.getModel());
        System.out.println("DEBUG - Status: " + criteria.getStatus());
        System.out.println("DEBUG - Min rok: " + criteria.getMinRok());
        System.out.println("DEBUG - Max rok: " + criteria.getMaxRok());
        System.out.println("DEBUG - Wyniki: " + results.size() + " samochodÃ³w");

        model.addAttribute("searchCriteria", criteria);
        model.addAttribute("samochody", results);
        model.addAttribute("marki", samochodService.findAllMarki());
        model.addAttribute("tytul", "Wyniki wyszukiwania");
        model.addAttribute("resultsCount", results.size());

        return "search/results";
    }

    // DODAJ TÄ˜ METODÄ˜ DLA WYSZUKIWANIA GET
    @GetMapping("/results")
    public String searchCarsGet(
            @RequestParam(required = false) String marka,
            @RequestParam(required = false) String model,
            @RequestParam(required = false) String status,
            @RequestParam(required = false) Integer minRok,
            @RequestParam(required = false) Integer maxRok,
            @RequestParam(required = false) Integer minPrzebieg,
            @RequestParam(required = false) Integer maxPrzebieg,
            @RequestParam(required = false) String rodzajPaliwa,
            Model modelAttr) {

        SamochodService.SearchCriteria criteria = new SamochodService.SearchCriteria();
        criteria.setMarka(marka);
        criteria.setModel(model);
        criteria.setStatus(status);
        criteria.setMinRok(minRok);
        criteria.setMaxRok(maxRok);
        criteria.setMinPrzebieg(minPrzebieg);
        criteria.setMaxPrzebieg(maxPrzebieg);
        criteria.setRodzajPaliwa(rodzajPaliwa);

        List<Samochod> results = samochodService.searchCars(criteria);

        modelAttr.addAttribute("searchCriteria", criteria);
        modelAttr.addAttribute("samochody", results);
        modelAttr.addAttribute("marki", samochodService.findAllMarki());
        modelAttr.addAttribute("tytul", "Wyniki wyszukiwania");
        modelAttr.addAttribute("resultsCount", results.size());

        return "search/results";
    }

    @GetMapping("/quick")
    public String quickSearch(
            @RequestParam(required = false) String marka,
            @RequestParam(required = false) String model,
            @RequestParam(required = false) String status,
            Model modelAttr) {

        List<Samochod> results = samochodService.searchCarsSimple(marka, model, status);

        modelAttr.addAttribute("samochody", results);
        modelAttr.addAttribute("marki", samochodService.findAllMarki());
        modelAttr.addAttribute("tytul", "Szybkie wyszukiwanie");
        modelAttr.addAttribute("resultsCount", results.size());
        modelAttr.addAttribute("searchMarka", marka);
        modelAttr.addAttribute("searchModel", model);
        modelAttr.addAttribute("searchStatus", status);

        return "search/quick-results";
    }
}


ŒCIE¯KA: src\main\java\pl\komis\controller\StronaController.java
-------------------------------------------------------------------
package pl.komis.controller;

import lombok.RequiredArgsConstructor;
import org.springframework.security.core.Authentication;
import org.springframework.security.core.context.SecurityContextHolder;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import pl.komis.model.Samochod;
import pl.komis.service.SamochodService;

import java.util.List;

@Controller
@RequiredArgsConstructor
public class StronaController {

    private final SamochodService samochodService;

    @GetMapping("/")
    public String stronaGlowna(Model model) {
        List<Samochod> samochody = samochodService.findAll();
        model.addAttribute("samochody", samochody);
        model.addAttribute("tytul", "Komis Samochodowy - Strona GÅ‚Ã³wna");

        // SprawdÅº czy uÅ¼ytkownik jest zalogowany
        Authentication authentication = SecurityContextHolder.getContext().getAuthentication();
        boolean isAuthenticated = authentication != null &&
                authentication.isAuthenticated() &&
                !authentication.getName().equals("anonymousUser");
        model.addAttribute("isAuthenticated", isAuthenticated);
        model.addAttribute("username", authentication.getName());

        return "index";
    }
}


ŒCIE¯KA: src\main\java\pl\komis\controller\ZakupController.java
------------------------------------------------------------------
package pl.komis.controller;

import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.*;
import pl.komis.model.Zakup;
import pl.komis.service.*;

@Controller
@RequestMapping("/zakupy")
@RequiredArgsConstructor
public class ZakupController {

    private final ZakupService zakupService;
    private final SamochodService samochodService;
    private final KlientService klientService;
    private final PracownikService pracownikService;

    @GetMapping
    public String listZakupy(Model model) {
        model.addAttribute("zakupy", zakupService.findAll());
        model.addAttribute("tytul", "Lista ZakupÃ³w");
        return "zakupy_lista";
    }

    @GetMapping("/dodaj")
    public String showAddForm(Model model) {
        model.addAttribute("zakup", new Zakup());
        model.addAttribute("samochody", samochodService.findAll());
        model.addAttribute("klienci", klientService.findAll());
        model.addAttribute("pracownicy", pracownikService.findAll());
        return "zakupy_form";
    }

    @PostMapping("/dodaj")
    public String addZakup(@ModelAttribute Zakup zakup) {
        zakupService.save(zakup);
        return "redirect:/zakupy";
    }

    @GetMapping("/edytuj/{id}")
    public String editZakup(@PathVariable Long id, Model model) {
        model.addAttribute("zakup", zakupService.getById(id));
        model.addAttribute("samochody", samochodService.findAll());
        model.addAttribute("klienci", klientService.findAll());
        model.addAttribute("pracownicy", pracownikService.findAll());
        return "zakupy_form";
    }

    @PostMapping("/edytuj/{id}")
    public String updateZakup(@PathVariable Long id, @ModelAttribute Zakup zakup) {
        zakup.setId(id);
        zakupService.save(zakup);
        return "redirect:/zakupy";
    }

    @GetMapping("/usun/{id}")
    public String deleteZakup(@PathVariable Long id) {
        zakupService.remove(id);
        return "redirect:/zakupy";
    }
}



ŒCIE¯KA: src\main\java\pl\komis\dto\RegisterRequest.java
-----------------------------------------------------------
package pl.komis.dto;

import lombok.Data;

@Data
public class RegisterRequest {
    private String username;
    private String email;
    private String password;
    private String confirmPassword;
}


ŒCIE¯KA: src\main\java\pl\komis\model\Klient.java
----------------------------------------------------
package pl.komis.model;

import jakarta.persistence.*;
import java.util.List;

@Entity
public class Klient {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    private String imie;
    private String nazwisko;
    private String email;
    private String telefon;

    @OneToMany(mappedBy = "klient", cascade = CascadeType.ALL)
    private List<Zakup> zakupy;

    public Klient() {}

    // --- Gettery i settery ---
    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getImie() {
        return imie;
    }

    public void setImie(String imie) {
        this.imie = imie;
    }

    public String getNazwisko() {
        return nazwisko;
    }

    public void setNazwisko(String nazwisko) {
        this.nazwisko = nazwisko;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getTelefon() {
        return telefon;
    }

    public void setTelefon(String telefon) {
        this.telefon = telefon;
    }

    public List<Zakup> getZakupy() {
        return zakupy;
    }

    public void setZakupy(List<Zakup> zakupy) {
        this.zakupy = zakupy;
    }
}



ŒCIE¯KA: src\main\java\pl\komis\model\KlientPromocja.java
------------------------------------------------------------
package pl.komis.model;

import jakarta.persistence.*;
import lombok.*;

import java.time.LocalDate;

@Entity
@Table(name = "klienci_promocje")
@Data
@NoArgsConstructor
@AllArgsConstructor
@Builder
public class KlientPromocja {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    // klient, ktÃ³ry otrzymaÅ‚ promocjÄ™
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "id_klienta", nullable = false)
    private Klient klient;

    // promocja, ktÃ³ra zostaÅ‚a przyznana
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "id_promocji", nullable = false)
    private Promocja promocja;

    private LocalDate dataPrzyznania;
}


ŒCIE¯KA: src\main\java\pl\komis\model\Pracownik.java
-------------------------------------------------------
package pl.komis.model;


import jakarta.persistence.*;
import lombok.*;


import java.time.LocalDate;
import java.util.ArrayList;
import java.util.List;


@Entity
@Table(name = "pracownicy")
@Data
@NoArgsConstructor
@AllArgsConstructor
public class Pracownik {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    private String imie;
    private String nazwisko;
    private String stanowisko;
    private String telefon;
    private String email;
    private LocalDate dataZatrudnienia;

    @OneToMany(mappedBy = "pracownik")
    private List<Sprzedaz> sprzedaze = new ArrayList<>();

    @OneToMany(mappedBy = "pracownik")
    private List<Serwis> serwisy = new ArrayList<>();

    @OneToMany(mappedBy = "pracownik")
    private List<Zakup> zakupy = new ArrayList<>();
}


ŒCIE¯KA: src\main\java\pl\komis\model\Promocja.java
------------------------------------------------------
package pl.komis.model;

import jakarta.persistence.*;
import lombok.*;

import java.time.LocalDate;
import java.util.ArrayList;
import java.util.List;

@Entity
@Table(name = "promocje")
@Data
@NoArgsConstructor
@AllArgsConstructor
@Builder
public class Promocja {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id; // ZMIANA: byÅ‚o idPromocji

    @Column(nullable = false)
    private String nazwa;

    private String rodzaj;
    private Double wartosc;

    @Column(columnDefinition = "text")
    private String opis;

    private LocalDate dataRozpoczecia;
    private LocalDate dataZakonczenia;
    private Boolean aktywna;

    // TYMCZASOWO ZAKOMENTUJ RELACJÄ˜
    // @OneToMany(mappedBy = "promocja", cascade = CascadeType.ALL, orphanRemoval = true)
    // private List<KlientPromocja> klientPromocje = new ArrayList<>();
}


ŒCIE¯KA: src\main\java\pl\komis\model\Samochod.java
------------------------------------------------------
package pl.komis.model;

import jakarta.persistence.*;
import java.math.BigDecimal;
import java.time.LocalDate;

@Entity
@Table(name = "samochody")
public class Samochod {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    private String marka;
    private String model;
    private int rokProdukcji;
    private int przebieg;

    @Column(name = "pojemnosc_silnika")
    private Double pojemnoscSilnika;

    @Column(name = "rodzaj_paliwa")
    private String rodzajPaliwa;

    @Column(name = "skrzynia_biegow")
    private String skrzyniaBiegow;

    private String kolor;
    private BigDecimal cena;
    private String status;

    @Column(name = "data_dodania")
    private LocalDate dataDodania;

    // DODANE: Pole na zdjÄ™cie
    @Column(name = "zdjecie_url")
    private String zdjecieUrl;

    public Samochod() {}

    // --- Gettery i settery ---
    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getMarka() {
        return marka;
    }

    public void setMarka(String marka) {
        this.marka = marka;
    }

    public String getModel() {
        return model;
    }

    public void setModel(String model) {
        this.model = model;
    }

    public int getRokProdukcji() {
        return rokProdukcji;
    }

    public void setRokProdukcji(int rokProdukcji) {
        this.rokProdukcji = rokProdukcji;
    }

    public int getPrzebieg() {
        return przebieg;
    }

    public void setPrzebieg(int przebieg) {
        this.przebieg = przebieg;
    }

    public Double getPojemnoscSilnika() {
        return pojemnoscSilnika;
    }

    public void setPojemnoscSilnika(Double pojemnoscSilnika) {
        this.pojemnoscSilnika = pojemnoscSilnika;
    }

    public String getRodzajPaliwa() {
        return rodzajPaliwa;
    }

    public void setRodzajPaliwa(String rodzajPaliwa) {
        this.rodzajPaliwa = rodzajPaliwa;
    }

    public String getSkrzyniaBiegow() {
        return skrzyniaBiegow;
    }

    public void setSkrzyniaBiegow(String skrzyniaBiegow) {
        this.skrzyniaBiegow = skrzyniaBiegow;
    }

    public String getKolor() {
        return kolor;
    }

    public void setKolor(String kolor) {
        this.kolor = kolor;
    }

    public BigDecimal getCena() {
        return cena;
    }

    public void setCena(BigDecimal cena) {
        this.cena = cena;
    }

    public String getStatus() {
        return status;
    }

    public void setStatus(String status) {
        this.status = status;
    }

    public LocalDate getDataDodania() {
        return dataDodania;
    }

    public void setDataDodania(LocalDate dataDodania) {
        this.dataDodania = dataDodania;
    }

    public String getZdjecieUrl() {
        return zdjecieUrl;
    }

    public void setZdjecieUrl(String zdjecieUrl) {
        this.zdjecieUrl = zdjecieUrl;
    }
}


ŒCIE¯KA: src\main\java\pl\komis\model\Serwis.java
----------------------------------------------------
package pl.komis.model;


import jakarta.persistence.*;
import lombok.*;


import java.time.LocalDate;


@Entity
@Table(name = "serwis")
@Data
@NoArgsConstructor
@AllArgsConstructor
public class Serwis {


    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;


    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "id_samochodu")
    private Samochod samochod;


    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "id_pracownika")
    private Pracownik pracownik;


    @Column(columnDefinition = "text")
    private String opisUslugi;
    private Double koszt;
    private LocalDate dataSerwisu;
}


ŒCIE¯KA: src\main\java\pl\komis\model\Sprzedaz.java
------------------------------------------------------
package pl.komis.model;


import jakarta.persistence.*;
import lombok.*;


import java.time.LocalDate;


@Entity
@Table(name = "sprzedaze")
@Data
@NoArgsConstructor
@AllArgsConstructor
public class Sprzedaz {


    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long idSprzedazy;


    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "id_samochodu")
    private Samochod samochod;


    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "id_klienta")
    private Klient klient;


    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "id_pracownika")
    private Pracownik pracownik;


    private LocalDate dataSprzedazy;
    private Double cenaSprzedazy;
    private String formaPlatnosci; // enum
}


ŒCIE¯KA: src\main\java\pl\komis\model\User.java
--------------------------------------------------
package pl.komis.model;

import jakarta.persistence.*;
import lombok.*;

import java.time.LocalDateTime;

@Entity
@Table(name = "users")
@Data
@NoArgsConstructor
@AllArgsConstructor
@Builder
public class User {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(unique = true, nullable = false, length = 50)
    private String username;

    @Column(unique = true, nullable = false, length = 100)
    private String email;

    @Column(nullable = false, length = 255)
    private String password;

    @Column(length = 20)
    private String role;

    @Column(name = "enabled")
    private Boolean enabled;

    @Column(name = "created_at")
    private LocalDateTime createdAt;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "klient_id")
    private Klient klient;
}


ŒCIE¯KA: src\main\java\pl\komis\model\Zakup.java
---------------------------------------------------
package pl.komis.model;

import jakarta.persistence.*;
import lombok.*;

import java.time.LocalDate;
import java.math.BigDecimal;

@Entity
@Table(name = "zakupy")
@Data
@NoArgsConstructor
@AllArgsConstructor
public class Zakup {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "id_samochodu")
    private Samochod samochod;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "id_klienta")
    private Klient klient;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "id_pracownika")
    private Pracownik pracownik;

    private LocalDate dataZakupu;

    @Column(precision = 12, scale = 2)
    private BigDecimal cenaZakupu;
}



ŒCIE¯KA: src\main\java\pl\komis\model\Zdjecie.java
-----------------------------------------------------
package pl.komis.model;


import jakarta.persistence.*;
import lombok.*;


@Entity
@Table(name = "zdjecia")
@Data
@NoArgsConstructor
@AllArgsConstructor
public class Zdjecie {


    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;


    private String url;
    @Column(length = 1000)
    private String opis;


    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "id_samochodu")
    private Samochod samochod;
}


ŒCIE¯KA: src\main\java\pl\komis\repository\KlientPromocjaRepository.java
---------------------------------------------------------------------------
package pl.komis.repository;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;
import pl.komis.model.KlientPromocja;

import java.util.List;

public interface KlientPromocjaRepository extends JpaRepository<KlientPromocja, Long> {

    @Query("SELECT kp FROM KlientPromocja kp WHERE kp.klient.id = :klientId")
    List<KlientPromocja> findByKlientId(@Param("klientId") Long klientId);

    @Query("SELECT kp FROM KlientPromocja kp WHERE kp.promocja.id = :promocjaId")
    List<KlientPromocja> findByPromocjaId(@Param("promocjaId") Long promocjaId);
}


ŒCIE¯KA: src\main\java\pl\komis\repository\KlientRepository.java
-------------------------------------------------------------------
package pl.komis.repository;

import org.springframework.data.jpa.repository.JpaRepository;
import pl.komis.model.Klient;

import java.util.Optional;

public interface KlientRepository extends JpaRepository<Klient, Long> {

    Optional<Klient> findByEmail(String email);
}



ŒCIE¯KA: src\main\java\pl\komis\repository\PracownikRepository.java
----------------------------------------------------------------------
package pl.komis.repository;

import org.springframework.data.jpa.repository.JpaRepository;
import pl.komis.model.Pracownik;

import java.util.List;

public interface PracownikRepository extends JpaRepository<Pracownik, Long> {

    List<Pracownik> findByStanowiskoIgnoreCase(String stanowisko);

    Pracownik findByEmail(String email);
}



ŒCIE¯KA: src\main\java\pl\komis\repository\PromocjaRepository.java
---------------------------------------------------------------------
package pl.komis.repository;

import org.springframework.data.jpa.repository.JpaRepository;
import pl.komis.model.Promocja;

import java.time.LocalDate;
import java.util.List;

public interface PromocjaRepository extends JpaRepository<Promocja, Long> {

    List<Promocja> findByDataRozpoczeciaBeforeAndDataZakonczeniaAfter(LocalDate from, LocalDate to);
}



ŒCIE¯KA: src\main\java\pl\komis\repository\SamochodRepository.java
---------------------------------------------------------------------
package pl.komis.repository;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.jpa.repository.query.Procedure;
import org.springframework.data.repository.query.Param;
import pl.komis.model.Samochod;

import java.math.BigDecimal;
import java.util.List;
import java.util.Map;

public interface SamochodRepository extends JpaRepository<Samochod, Long> {

    // ==================== PODSTAWOWE METODY WYSZUKIWANIA ====================

    @Query("SELECT s FROM Samochod s WHERE LOWER(s.marka) = LOWER(:marka)")
    List<Samochod> findByMarkaIgnoreCase(@Param("marka") String marka);

    @Query("SELECT s FROM Samochod s WHERE LOWER(s.model) = LOWER(:model)")
    List<Samochod> findByModelIgnoreCase(@Param("model") String model);

    @Query("SELECT s FROM Samochod s WHERE s.status = :status")
    List<Samochod> findByStatus(@Param("status") String status);

    @Query("SELECT s FROM Samochod s WHERE s.cena BETWEEN :minCena AND :maxCena")
    List<Samochod> findByCenaBetween(@Param("minCena") BigDecimal minCena,
                                     @Param("maxCena") BigDecimal maxCena);

    // ==================== NOWE EFEKTYWNE METODY ====================

    @Query(value = "SELECT DISTINCT marka FROM samochody ORDER BY marka", nativeQuery = true)
    List<String> findAllMarkiDistinct();

    @Query("SELECT COUNT(s) FROM Samochod s WHERE s.status = :status")
    long countByStatus(@Param("status") String status);

    @Query(value = "SELECT * FROM get_car_statistics()", nativeQuery = true)
    Map<String, Object> getCarStatistics();

    @Query(value = "SELECT * FROM get_popular_brands(:limitCount)", nativeQuery = true)
    List<Object[]> getPopularBrands(@Param("limitCount") Integer limitCount);

    // ==================== PROCEDURY CRUD ====================

    @Procedure(procedureName = "create_car")
    Long createCar(
            @Param("p_marka") String marka,
            @Param("p_model") String model,
            @Param("p_rok_produkcji") Integer rokProdukcji,
            @Param("p_przebieg") Integer przebieg,
            @Param("p_pojemnosc_silnika") Double pojemnoscSilnika,
            @Param("p_rodzaj_paliwa") String rodzajPaliwa,
            @Param("p_skrzynia_biegow") String skrzyniaBiegow,
            @Param("p_kolor") String kolor,
            @Param("p_cena") BigDecimal cena,
            @Param("p_status") String status,
            @Param("p_zdjecie_url") String zdjecieUrl
    );

    @Procedure(procedureName = "update_car")
    void updateCar(
            @Param("p_id") Long id,
            @Param("p_marka") String marka,
            @Param("p_model") String model,
            @Param("p_rok_produkcji") Integer rokProdukcji,
            @Param("p_przebieg") Integer przebieg,
            @Param("p_pojemnosc_silnika") Double pojemnoscSilnika,
            @Param("p_rodzaj_paliwa") String rodzajPaliwa,
            @Param("p_skrzynia_biegow") String skrzyniaBiegow,
            @Param("p_kolor") String kolor,
            @Param("p_cena") BigDecimal cena,
            @Param("p_status") String status,
            @Param("p_zdjecie_url") String zdjecieUrl
    );

    @Procedure(procedureName = "delete_car")
    void deleteCar(@Param("p_id") Long id);

    // ==================== ZAAWANSOWANE WYSZUKIWANIE ====================

    @Query(value = "SELECT s.* FROM samochody s " +
            "WHERE (:p_marka IS NULL OR LOWER(s.marka) = LOWER(:p_marka)) " +
            "AND (:p_model IS NULL OR LOWER(s.model) = LOWER(:p_model)) " +
            "AND (:p_min_rok IS NULL OR s.rok_produkcji >= :p_min_rok) " +
            "AND (:p_max_rok IS NULL OR s.rok_produkcji <= :p_max_rok) " +
            "AND (:p_min_przebieg IS NULL OR s.przebieg >= :p_min_przebieg) " +
            "AND (:p_max_przebieg IS NULL OR s.przebieg <= :p_max_przebieg) " +
            "AND (:p_min_cena IS NULL OR s.cena >= :p_min_cena) " +
            "AND (:p_max_cena IS NULL OR s.cena <= :p_max_cena) " +
            "AND (:p_rodzaj_paliwa IS NULL OR s.rodzaj_paliwa = :p_rodzaj_paliwa) " +
            "AND (:p_status IS NULL OR s.status = :p_status)", nativeQuery = true)
    List<Samochod> searchCars(
            @Param("p_marka") String marka,
            @Param("p_model") String model,
            @Param("p_min_rok") Integer minRok,
            @Param("p_max_rok") Integer maxRok,
            @Param("p_min_przebieg") Integer minPrzebieg,
            @Param("p_max_przebieg") Integer maxPrzebieg,
            @Param("p_min_cena") BigDecimal minCena,
            @Param("p_max_cena") BigDecimal maxCena,
            @Param("p_rodzaj_paliwa") String rodzajPaliwa,
            @Param("p_status") String status
    );

    // ==================== PROSTE WYSZUKIWANIE ====================

    @Query(value = "SELECT s.* FROM samochody s " +
            "WHERE (:p_marka IS NULL OR LOWER(s.marka) = LOWER(:p_marka)) " +
            "AND (:p_model IS NULL OR LOWER(s.model) = LOWER(:p_model)) " +
            "AND (:p_status IS NULL OR s.status = :p_status)", nativeQuery = true)
    List<Samochod> searchCarsSimple(
            @Param("p_marka") String marka,
            @Param("p_model") String model,
            @Param("p_status") String status
    );

    // ==================== PROCEDURY OPERACJI BIZNESOWYCH ====================

    @Procedure(procedureName = "reserve_car")
    Map<String, Object> reserveCar(
            @Param("p_car_id") Long carId,
            @Param("p_user_id") Long userId
    );

    @Procedure(procedureName = "sell_car")
    Map<String, Object> sellCar(
            @Param("p_car_id") Long carId,
            @Param("p_user_id") Long userId,
            @Param("p_employee_id") Long employeeId,
            @Param("p_final_price") BigDecimal finalPrice
    );

    @Procedure(procedureName = "cancel_reservation")
    Map<String, Object> cancelReservation(@Param("p_car_id") Long carId);
}


ŒCIE¯KA: src\main\java\pl\komis\repository\SerwisRepository.java
-------------------------------------------------------------------
package pl.komis.repository;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;
import pl.komis.model.Serwis;

import java.time.LocalDate;
import java.util.List;

public interface SerwisRepository extends JpaRepository<Serwis, Long> {

    List<Serwis> findByDataSerwisuBetween(LocalDate od, LocalDate do_);

    // POPRAWIONE METODY Z @Query
    @Query("SELECT s FROM Serwis s WHERE s.samochod.id = :samochodId")
    List<Serwis> findBySamochodId(@Param("samochodId") Long samochodId);

    @Query("SELECT s FROM Serwis s WHERE s.pracownik.id = :pracownikId")
    List<Serwis> findByPracownikId(@Param("pracownikId") Long pracownikId);
}


ŒCIE¯KA: src\main\java\pl\komis\repository\SprzedazRepository.java
---------------------------------------------------------------------
package pl.komis.repository;

import org.springframework.data.jpa.repository.JpaRepository;
import pl.komis.model.Sprzedaz;

import java.time.LocalDate;
import java.util.List;

public interface SprzedazRepository extends JpaRepository<Sprzedaz, Long> {

    // ZAKOMENTUJ WSZYSTKIE METODY
    // List<Sprzedaz> findByDataSprzedazyBetween(LocalDate od, LocalDate do_);
    // List<Sprzedaz> findByPracownikIdPracownika(Long idPracownika);
    // List<Sprzedaz> findByKlientIdKlienta(Long idKlienta);
    // List<Sprzedaz> findBySamochodIdSamochodu(Long idSamochodu);
}


ŒCIE¯KA: src\main\java\pl\komis\repository\UserRepository.java
-----------------------------------------------------------------
package pl.komis.repository;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.jpa.repository.query.Procedure;
import org.springframework.data.repository.query.Param;
import org.springframework.stereotype.Repository;
import pl.komis.model.User;

import java.util.List;
import java.util.Map;
import java.util.Optional;

@Repository
public interface UserRepository extends JpaRepository<User, Long> {

    Optional<User> findByUsername(String username);
    Optional<User> findByEmail(String email);
    boolean existsByUsername(String username);
    boolean existsByEmail(String email);

    // ==================== NOWE EFEKTYWNE METODY ====================

    @Query("SELECT u FROM User u WHERE u.role = :role")
    List<User> findByRole(@Param("role") String role);

    @Query("SELECT COUNT(u) FROM User u WHERE u.role = :role")
    long countByRole(@Param("role") String role);

    @Query("SELECT u FROM User u WHERE u.enabled = true")
    List<User> findActiveUsers();

    @Query("SELECT u FROM User u WHERE u.enabled = false")
    List<User> findInactiveUsers();

    @Query(value = "SELECT * FROM get_user_statistics()", nativeQuery = true)
    Map<String, Object> getUserStatisticsNative();

    // ==================== PROCEDURY ====================

    @Procedure(procedureName = "create_user")
    Long createUser(
            @Param("p_username") String username,
            @Param("p_email") String email,
            @Param("p_password") String password,
            @Param("p_role") String role,
            @Param("p_enabled") Boolean enabled
    );

    @Procedure(procedureName = "update_user")
    void updateUser(
            @Param("p_id") Long id,
            @Param("p_username") String username,
            @Param("p_email") String email,
            @Param("p_password") String password,
            @Param("p_role") String role,
            @Param("p_enabled") Boolean enabled
    );

    @Procedure(procedureName = "delete_user")
    void deleteUser(@Param("p_id") Long id);
}


ŒCIE¯KA: src\main\java\pl\komis\repository\ZakupRepository.java
------------------------------------------------------------------
package pl.komis.repository;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;
import pl.komis.model.Zakup;

import java.time.LocalDate;
import java.util.List;

public interface ZakupRepository extends JpaRepository<Zakup, Long> {

    List<Zakup> findByDataZakupuBetween(LocalDate od, LocalDate do_);

    // POPRAWIONE METODY Z @Query
    @Query("SELECT z FROM Zakup z WHERE z.klient.id = :klientId")
    List<Zakup> findByKlientId(@Param("klientId") Long klientId);

    @Query("SELECT z FROM Zakup z WHERE z.pracownik.id = :pracownikId")
    List<Zakup> findByPracownikId(@Param("pracownikId") Long pracownikId);
}


ŒCIE¯KA: src\main\java\pl\komis\repository\ZdjecieRepository.java
--------------------------------------------------------------------
package pl.komis.repository;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;
import pl.komis.model.Zdjecie;

import java.util.List;

public interface ZdjecieRepository extends JpaRepository<Zdjecie, Long> {

    @Query("SELECT z FROM Zdjecie z WHERE z.samochod.id = :samochodId")
    List<Zdjecie> findBySamochodId(@Param("samochodId") Long samochodId);
}


ŒCIE¯KA: src\main\java\pl\komis\service\CustomUserDetailsService.java
------------------------------------------------------------------------
package pl.komis.service;

import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.security.core.GrantedAuthority;
import org.springframework.security.core.authority.SimpleGrantedAuthority;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.core.userdetails.UserDetailsService;
import org.springframework.security.core.userdetails.UsernameNotFoundException;
import org.springframework.stereotype.Service;
import pl.komis.model.User;
import pl.komis.repository.UserRepository;

import java.util.Collection;
import java.util.Collections;

@Slf4j
@Service
@RequiredArgsConstructor
public class CustomUserDetailsService implements UserDetailsService {

    private final UserRepository userRepository;

    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
        log.info("=== PRÃ“BA LOGOWANIA ===");
        log.info("Szukam uÅ¼ytkownika: {}", username);

        User user = userRepository.findByUsername(username)
                .orElseThrow(() -> {
                    log.error("âŒ UÅ¼ytkownik nie znaleziony: {}", username);
                    return new UsernameNotFoundException("UÅ¼ytkownik nie znaleziony: " + username);
                });

        log.info("âœ… Znaleziono uÅ¼ytkownika: {}", user.getUsername());
        log.info("ðŸ“§ Email: {}", user.getEmail());
        log.info("ðŸŽ¯ Rola: {}", user.getRole());
        log.info("ðŸ”“ Enabled: {}", user.getEnabled());
        log.info("ðŸ”‘ DÅ‚ugoÅ›Ä‡ hasÅ‚a: {}", user.getPassword() != null ? user.getPassword().length() : "NULL");
        log.info("=== KONIEC WCZYTYWANIA UÅ»YTKOWNIKA ===");

        // SprawdÅº czy uÅ¼ytkownik jest enabled
        if (user.getEnabled() != null && !user.getEnabled()) {
            log.error("âŒ Konto uÅ¼ytkownika {} jest wyÅ‚Ä…czone", username);
            throw new UsernameNotFoundException("Konto jest wyÅ‚Ä…czone: " + username);
        }

        return new org.springframework.security.core.userdetails.User(
                user.getUsername(),
                user.getPassword(),
                user.getEnabled() == null ? true : user.getEnabled(), // domyÅ›lnie true jeÅ›li null
                true, // accountNonExpired
                true, // credentialsNonExpired
                true, // accountNonLocked
                getAuthorities(user.getRole())
        );
    }

    private Collection<? extends GrantedAuthority> getAuthorities(String role) {
        String authority = "ROLE_" + (role != null ? role : "USER");
        log.info("ðŸ·ï¸  NadajÄ™ uprawnienie: {}", authority);
        return Collections.singletonList(new SimpleGrantedAuthority(authority));
    }
}


ŒCIE¯KA: src\main\java\pl\komis\service\KlientPromocjaService.java
---------------------------------------------------------------------
package pl.komis.service;

import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;
import pl.komis.model.Klient;
import pl.komis.model.KlientPromocja;
import pl.komis.model.Promocja;
import pl.komis.repository.KlientPromocjaRepository;
import pl.komis.repository.KlientRepository;
import pl.komis.repository.PromocjaRepository;

import java.util.List;

@Service
@RequiredArgsConstructor
public class KlientPromocjaService {

    private final KlientPromocjaRepository klientPromocjaRepository;
    private final KlientRepository klientRepository;
    private final PromocjaRepository promocjaRepository;

    public List<KlientPromocja> findAll() {
        return klientPromocjaRepository.findAll();
    }

    public KlientPromocja findById(Long id) {
        return klientPromocjaRepository.findById(id)
                .orElseThrow(() -> new RuntimeException("Nie znaleziono przypisania promocji o id=" + id));
    }

    public List<KlientPromocja> findByKlientId(Long klientId) {
        return klientPromocjaRepository.findByKlientId(klientId);
    }

    public List<KlientPromocja> findByPromocjaId(Long promocjaId) {
        return klientPromocjaRepository.findByPromocjaId(promocjaId);
    }

    // ============================
    //    NAJWAÅ»NIEJSZE METODY
    // ============================

    public KlientPromocja assignPromotion(Long idKlienta, Long idPromocji) {

        Klient klient = klientRepository.findById(idKlienta)
                .orElseThrow(() -> new RuntimeException("Klient nie istnieje: " + idKlienta));

        Promocja promocja = promocjaRepository.findById(idPromocji)
                .orElseThrow(() -> new RuntimeException("Promocja nie istnieje: " + idPromocji));

        // tworzymy przypisanie
        KlientPromocja kp = new KlientPromocja();
        kp.setKlient(klient);
        kp.setPromocja(promocja);

        return klientPromocjaRepository.save(kp);
    }

    public void remove(Long id) {
        if (!klientPromocjaRepository.existsById(id)) {
            throw new RuntimeException("Nie znaleziono przypisania do usuniÄ™cia: " + id);
        }
        klientPromocjaRepository.deleteById(id);
    }
}


ŒCIE¯KA: src\main\java\pl\komis\service\KlientService.java
-------------------------------------------------------------
package pl.komis.service;

import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;
import pl.komis.model.Klient;
import pl.komis.repository.KlientRepository;

import java.util.List;
import java.util.NoSuchElementException;
import java.util.Optional;

@Service
@RequiredArgsConstructor
public class KlientService {

    private final KlientRepository klientRepository;

    public List<Klient> findAll() {
        return klientRepository.findAll();
    }

    public Klient getById(Long id) {
        return klientRepository.findById(id)
                .orElseThrow(() -> new NoSuchElementException("Klient o id " + id + " nie istnieje."));
    }

    public Klient save(Klient klient) {
        return klientRepository.save(klient);
    }

    public void remove(Long id) {
        if (!klientRepository.existsById(id)) {
            throw new NoSuchElementException("Nie moÅ¼na usunÄ…Ä‡ â€” klient o id " + id + " nie istnieje.");
        }
        klientRepository.deleteById(id);
    }

    public Optional<Klient> findByEmail(String email) {
        return klientRepository.findByEmail(email);
    }
}



ŒCIE¯KA: src\main\java\pl\komis\service\PracownikService.java
----------------------------------------------------------------
package pl.komis.service;

import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;
import pl.komis.model.Pracownik;
import pl.komis.repository.PracownikRepository;

import java.util.List;
import java.util.NoSuchElementException;

@Service
@RequiredArgsConstructor
public class PracownikService {

    private final PracownikRepository pracownikRepository;

    public List<Pracownik> findAll() {
        return pracownikRepository.findAll();
    }

    public Pracownik getById(Long id) {
        return pracownikRepository.findById(id)
                .orElseThrow(() -> new NoSuchElementException("Pracownik o ID " + id + " nie istnieje"));
    }

    public Pracownik save(Pracownik pracownik) {
        return pracownikRepository.save(pracownik);
    }

    public void remove(Long id) {
        pracownikRepository.deleteById(id);
    }
}





ŒCIE¯KA: src\main\java\pl\komis\service\PromocjaService.java
---------------------------------------------------------------
package pl.komis.service;

import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;
import pl.komis.model.Promocja;
import pl.komis.repository.PromocjaRepository;

import java.time.LocalDate;
import java.util.List;
import java.util.NoSuchElementException;

@Service
@RequiredArgsConstructor
public class PromocjaService {

    private final PromocjaRepository promocjaRepository;

    public List<Promocja> findAll() {
        return promocjaRepository.findAll();
    }

    public Promocja getById(Long id) {
        return promocjaRepository.findById(id)
                .orElseThrow(() -> new NoSuchElementException("Promocja o id " + id + " nie istnieje."));
    }

    public Promocja save(Promocja promocja) {
        return promocjaRepository.save(promocja);
    }

    public Promocja update(Long id, Promocja data) {
        Promocja p = getById(id);

        p.setNazwa(data.getNazwa());
        p.setRodzaj(data.getRodzaj());
        p.setWartosc(data.getWartosc());
        p.setOpis(data.getOpis());
        p.setDataRozpoczecia(data.getDataRozpoczecia());
        p.setDataZakonczenia(data.getDataZakonczenia());
        p.setAktywna(data.getAktywna());

        return promocjaRepository.save(p);
    }

    public void remove(Long id) {
        if (!promocjaRepository.existsById(id)) {
            throw new NoSuchElementException("Promocja o id " + id + " nie istnieje.");
        }
        promocjaRepository.deleteById(id);
    }

    public List<Promocja> findActive() {
        LocalDate today = LocalDate.now();
        return promocjaRepository.findByDataRozpoczeciaBeforeAndDataZakonczeniaAfter(today, today);
    }
}



ŒCIE¯KA: src\main\java\pl\komis\service\SamochodService.java
---------------------------------------------------------------
package pl.komis.service;

import lombok.Data;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;
import pl.komis.model.Samochod;
import pl.komis.repository.SamochodRepository;

import java.math.BigDecimal;
import java.time.LocalDate;
import java.util.List;
import java.util.Map;
import java.util.Optional;
import java.util.stream.Collectors;

@Service
@RequiredArgsConstructor
@Transactional
public class SamochodService {

    private final SamochodRepository samochodRepository;

    // ==================== PODSTAWOWE OPERACJE CRUD ====================

    @Transactional(readOnly = true)
    public List<Samochod> findAll() {
        return samochodRepository.findAll();
    }

    @Transactional(readOnly = true)
    public Optional<Samochod> findById(Long id) {
        return samochodRepository.findById(id);
    }

    @Transactional
    public Samochod save(Samochod samochod) {
        // Ustaw domyÅ›lne wartoÅ›ci jeÅ¼eli potrzebne
        if (samochod.getDataDodania() == null) {
            samochod.setDataDodania(LocalDate.now());
        }
        if (samochod.getRodzajPaliwa() == null) {
            samochod.setRodzajPaliwa("Benzyna");
        }
        if (samochod.getSkrzyniaBiegow() == null) {
            samochod.setSkrzyniaBiegow("Manualna");
        }
        if (samochod.getPojemnoscSilnika() == null) {
            samochod.setPojemnoscSilnika(2.0);
        }
        if (samochod.getStatus() == null) {
            samochod.setStatus("DOSTEPNY");
        }

        // Upewnij siÄ™, Å¼e zdjecieUrl nie jest null
        String zdjecieUrl = samochod.getZdjecieUrl();
        if (zdjecieUrl == null) {
            zdjecieUrl = "";
        }

        if (samochod.getId() == null) {
            // Tworzenie nowego samochodu przez procedurÄ™
            Long newCarId = samochodRepository.createCar(
                    samochod.getMarka(),
                    samochod.getModel(),
                    samochod.getRokProdukcji(),
                    samochod.getPrzebieg(),
                    samochod.getPojemnoscSilnika(),
                    samochod.getRodzajPaliwa(),
                    samochod.getSkrzyniaBiegow(),
                    samochod.getKolor(),
                    samochod.getCena(),
                    samochod.getStatus(),
                    zdjecieUrl
            );

            return samochodRepository.findById(newCarId)
                    .orElseThrow(() -> new RuntimeException("BÅ‚Ä…d podczas tworzenia samochodu"));
        } else {
            // Aktualizacja istniejÄ…cego samochodu przez procedurÄ™
            samochodRepository.updateCar(
                    samochod.getId(),
                    samochod.getMarka(),
                    samochod.getModel(),
                    samochod.getRokProdukcji(),
                    samochod.getPrzebieg(),
                    samochod.getPojemnoscSilnika(),
                    samochod.getRodzajPaliwa(),
                    samochod.getSkrzyniaBiegow(),
                    samochod.getKolor(),
                    samochod.getCena(),
                    samochod.getStatus(),
                    zdjecieUrl
            );

            return samochodRepository.findById(samochod.getId())
                    .orElseThrow(() -> new RuntimeException("BÅ‚Ä…d podczas aktualizacji samochodu"));
        }
    }

    @Transactional
    public void delete(Long id) {
        if (!samochodRepository.existsById(id)) {
            throw new RuntimeException("SamochÃ³d nie znaleziony");
        }
        // UÅ¼ycie procedury usuwania
        samochodRepository.deleteCar(id);
    }

    // ==================== ZAAWANSOWANE WYSZUKIWANIE ====================

    @Transactional(readOnly = true)
    public List<Samochod> searchCars(SearchCriteria criteria) {
        // Upewnij siÄ™, Å¼e puste stringi sÄ… traktowane jako null
        String marka = (criteria.getMarka() != null && !criteria.getMarka().trim().isEmpty()) ? criteria.getMarka() : null;
        String model = (criteria.getModel() != null && !criteria.getModel().trim().isEmpty()) ? criteria.getModel() : null;
        String status = (criteria.getStatus() != null && !criteria.getStatus().trim().isEmpty()) ? criteria.getStatus() : null;
        String rodzajPaliwa = (criteria.getRodzajPaliwa() != null && !criteria.getRodzajPaliwa().trim().isEmpty()) ? criteria.getRodzajPaliwa() : null;

        return samochodRepository.searchCars(
                marka,
                model,
                criteria.getMinRok(),
                criteria.getMaxRok(),
                criteria.getMinPrzebieg(),
                criteria.getMaxPrzebieg(),
                criteria.getMinCena(),
                criteria.getMaxCena(),
                rodzajPaliwa,
                status
        );
    }

    @Transactional(readOnly = true)
    public List<Samochod> searchCarsSimple(String marka, String model, String status) {
        // Upewnij siÄ™, Å¼e puste stringi sÄ… traktowane jako null
        String searchMarka = (marka != null && !marka.trim().isEmpty()) ? marka : null;
        String searchModel = (model != null && !model.trim().isEmpty()) ? model : null;
        String searchStatus = (status != null && !status.trim().isEmpty()) ? status : null;

        return samochodRepository.searchCarsSimple(searchMarka, searchModel, searchStatus);
    }

    // ==================== OPERACJE BIZNESOWE ====================

    @Transactional
    public Map<String, Object> reserveCar(Long carId, Long userId) {
        try {
            return samochodRepository.reserveCar(carId, userId);
        } catch (Exception e) {
            throw new RuntimeException("BÅ‚Ä…d podczas rezerwacji samochodu: " + e.getMessage());
        }
    }

    @Transactional
    public Map<String, Object> sellCar(Long carId, Long userId, Long employeeId, BigDecimal finalPrice) {
        try {
            return samochodRepository.sellCar(carId, userId, employeeId, finalPrice);
        } catch (Exception e) {
            throw new RuntimeException("BÅ‚Ä…d podczas sprzedaÅ¼y samochodu: " + e.getMessage());
        }
    }

    @Transactional
    public Map<String, Object> cancelReservation(Long carId) {
        try {
            return samochodRepository.cancelReservation(carId);
        } catch (Exception e) {
            throw new RuntimeException("BÅ‚Ä…d podczas anulowania rezerwacji: " + e.getMessage());
        }
    }

    // ==================== METODY POMOCNICZE ====================

    @Transactional(readOnly = true)
    public List<Samochod> findByMarka(String marka) {
        return samochodRepository.findByMarkaIgnoreCase(marka);
    }

    @Transactional(readOnly = true)
    public List<Samochod> findByModel(String model) {
        return samochodRepository.findByModelIgnoreCase(model);
    }

    @Transactional(readOnly = true)
    public List<Samochod> findByStatus(String status) {
        return samochodRepository.findByStatus(status);
    }

    @Transactional(readOnly = true)
    public List<Samochod> findByCenaBetween(BigDecimal min, BigDecimal max) {
        return samochodRepository.findByCenaBetween(min, max);
    }

    @Transactional(readOnly = true)
    public long count() {
        return samochodRepository.count();
    }

    @Transactional(readOnly = true)
    public long countByStatus(String status) {
        return samochodRepository.countByStatus(status);
    }

    @Transactional(readOnly = true)
    public List<Samochod> findAvailableCars() {
        return samochodRepository.findByStatus("DOSTEPNY");
    }

    @Transactional(readOnly = true)
    public List<Samochod> findSoldCars() {
        return samochodRepository.findByStatus("SPRZEDANY");
    }

    @Transactional(readOnly = true)
    public List<Samochod> findReservedCars() {
        return samochodRepository.findByStatus("ZAREZERWOWANY");
    }

    @Transactional(readOnly = true)
    public boolean existsById(Long id) {
        return samochodRepository.existsById(id);
    }

    @Transactional
    public Samochod updateStatus(Long id, String newStatus) {
        Samochod samochod = samochodRepository.findById(id)
                .orElseThrow(() -> new RuntimeException("SamochÃ³d nie znaleziony"));

        samochodRepository.updateCar(
                samochod.getId(),
                samochod.getMarka(),
                samochod.getModel(),
                samochod.getRokProdukcji(),
                samochod.getPrzebieg(),
                samochod.getPojemnoscSilnika(),
                samochod.getRodzajPaliwa(),
                samochod.getSkrzyniaBiegow(),
                samochod.getKolor(),
                samochod.getCena(),
                newStatus,
                samochod.getZdjecieUrl()
        );

        return samochodRepository.findById(id)
                .orElseThrow(() -> new RuntimeException("BÅ‚Ä…d podczas aktualizacji statusu samochodu"));
    }

    @Transactional(readOnly = true)
    public List<String> findAllMarki() {
        return samochodRepository.findAllMarkiDistinct();
    }

    // ==================== NOWE METODY DLA STATYSTYK ====================

    @Transactional(readOnly = true)
    public Map<String, Object> getCarStatistics() {
        return samochodRepository.getCarStatistics();
    }

    @Transactional(readOnly = true)
    public List<Object[]> getPopularBrands(Integer limit) {
        return samochodRepository.getPopularBrands(limit);
    }

    // ==================== KLASY POMOCNICZE ====================

    @Data
    public static class SearchCriteria {
        private String marka;
        private String model;
        private Integer minRok;
        private Integer maxRok;
        private Integer minPrzebieg;
        private Integer maxPrzebieg;
        private BigDecimal minCena;
        private BigDecimal maxCena;
        private String rodzajPaliwa;
        private String status;
    }
}


ŒCIE¯KA: src\main\java\pl\komis\service\UserService.java
-----------------------------------------------------------
package pl.komis.service;

import lombok.Getter;
import lombok.RequiredArgsConstructor;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.stereotype.Service;
import pl.komis.model.User;
import pl.komis.repository.UserRepository;

import java.util.List;
import java.util.Map;
import java.util.Optional;
import java.util.stream.Collectors;

@Service
@RequiredArgsConstructor
public class UserService {

    private final UserRepository userRepository;
    private final PasswordEncoder passwordEncoder;

    // ==================== METODY REJESTRACJI I TWORZENIA ====================

    public User registerUser(User user, String rawPassword) {
        if (userRepository.existsByUsername(user.getUsername())) {
            throw new RuntimeException("Nazwa uÅ¼ytkownika jest juÅ¼ zajÄ™ta");
        }
        if (userRepository.existsByEmail(user.getEmail())) {
            throw new RuntimeException("Email jest juÅ¼ zajÄ™ty");
        }

        String encodedPassword = passwordEncoder.encode(rawPassword);
        String role = user.getRole() != null ? user.getRole() : "USER";

        // UÅ¼ycie procedury zamiast standardowego save
        Long newUserId = userRepository.createUser(
                user.getUsername(),
                user.getEmail(),
                encodedPassword,
                role,
                true
        );

        // Pobierz utworzonego uÅ¼ytkownika
        return userRepository.findById(newUserId)
                .orElseThrow(() -> new RuntimeException("BÅ‚Ä…d podczas tworzenia uÅ¼ytkownika"));
    }

    public User createUserByAdmin(User user, String rawPassword, String role) {
        if (userRepository.existsByUsername(user.getUsername())) {
            throw new RuntimeException("Nazwa uÅ¼ytkownika jest juÅ¼ zajÄ™ta");
        }
        if (userRepository.existsByEmail(user.getEmail())) {
            throw new RuntimeException("Email jest juÅ¼ zajÄ™ty");
        }

        String encodedPassword = passwordEncoder.encode(rawPassword);

        // UÅ¼ycie procedury tworzenia uÅ¼ytkownika
        Long newUserId = userRepository.createUser(
                user.getUsername(),
                user.getEmail(),
                encodedPassword,
                role,
                true
        );

        return userRepository.findById(newUserId)
                .orElseThrow(() -> new RuntimeException("BÅ‚Ä…d podczas tworzenia uÅ¼ytkownika"));
    }

    public User createUser(User user, String rawPassword) {
        if (userRepository.existsByUsername(user.getUsername())) {
            throw new RuntimeException("Nazwa uÅ¼ytkownika jest juÅ¼ zajÄ™ta");
        }
        if (userRepository.existsByEmail(user.getEmail())) {
            throw new RuntimeException("Email jest juÅ¼ zajÄ™ty");
        }

        String encodedPassword = passwordEncoder.encode(rawPassword);
        String role = user.getRole() != null ? user.getRole() : "USER";

        // UÅ¼ycie procedury tworzenia uÅ¼ytkownika
        Long newUserId = userRepository.createUser(
                user.getUsername(),
                user.getEmail(),
                encodedPassword,
                role,
                true
        );

        return userRepository.findById(newUserId)
                .orElseThrow(() -> new RuntimeException("BÅ‚Ä…d podczas tworzenia uÅ¼ytkownika"));
    }

    // ==================== METODY ODCZYTU ====================

    public List<User> findAllUsers() { return userRepository.findAll(); }

    public Optional<User> findById(Long id) {
        return userRepository.findById(id);
    }

    public Optional<User> findUserById(Long id) {
        return userRepository.findById(id);
    }

    public Optional<User> findByUsername(String username) {
        return userRepository.findByUsername(username);
    }

    public Optional<User> findByEmail(String email) {
        return userRepository.findByEmail(email);
    }

    // ==================== METODY AKTUALIZACJI ====================

    public User updateUser(User user) {
        // SprawdÅº czy uÅ¼ytkownik istnieje
        User existingUser = userRepository.findById(user.getId())
                .orElseThrow(() -> new RuntimeException("UÅ¼ytkownik nie znaleziony"));

        // SprawdÅº unikalnoÅ›Ä‡ username (jeÅ›li siÄ™ zmieniÅ‚)
        if (!existingUser.getUsername().equals(user.getUsername()) &&
                userRepository.existsByUsername(user.getUsername())) {
            throw new RuntimeException("Nazwa uÅ¼ytkownika jest juÅ¼ zajÄ™ta");
        }

        // SprawdÅº unikalnoÅ›Ä‡ email (jeÅ›li siÄ™ zmieniÅ‚)
        if (!existingUser.getEmail().equals(user.getEmail()) &&
                userRepository.existsByEmail(user.getEmail())) {
            throw new RuntimeException("Email jest juÅ¼ zajÄ™ty");
        }

        // Zachowaj hasÅ‚o jeÅ›li nie zostaÅ‚o zmienione
        String password = user.getPassword();
        if (password == null || password.isEmpty()) {
            password = existingUser.getPassword();
        } else {
            // JeÅ›li podano nowe hasÅ‚o, zakoduj je
            password = passwordEncoder.encode(password);
        }

        // UÅ¼ycie procedury aktualizacji
        userRepository.updateUser(
                user.getId(),
                user.getUsername(),
                user.getEmail(),
                password,
                user.getRole(),
                user.getEnabled() != null ? user.getEnabled() : true
        );

        return userRepository.findById(user.getId())
                .orElseThrow(() -> new RuntimeException("BÅ‚Ä…d podczas aktualizacji uÅ¼ytkownika"));
    }

    public User changePassword(Long userId, String newPassword) {
        User user = userRepository.findById(userId)
                .orElseThrow(() -> new RuntimeException("UÅ¼ytkownik nie znaleziony"));

        String encodedPassword = passwordEncoder.encode(newPassword);

        // UÅ¼ycie procedury aktualizacji z nowym hasÅ‚em
        userRepository.updateUser(
                user.getId(),
                user.getUsername(),
                user.getEmail(),
                encodedPassword,
                user.getRole(),
                user.getEnabled()
        );

        return userRepository.findById(userId)
                .orElseThrow(() -> new RuntimeException("BÅ‚Ä…d podczas zmiany hasÅ‚a"));
    }

    public User toggleUserStatus(Long userId) {
        User user = userRepository.findById(userId)
                .orElseThrow(() -> new RuntimeException("UÅ¼ytkownik nie znaleziony"));

        boolean newStatus = !user.getEnabled();

        // UÅ¼ycie procedury aktualizacji statusu
        userRepository.updateUser(
                user.getId(),
                user.getUsername(),
                user.getEmail(),
                user.getPassword(),
                user.getRole(),
                newStatus
        );

        return userRepository.findById(userId)
                .orElseThrow(() -> new RuntimeException("BÅ‚Ä…d podczas zmiany statusu uÅ¼ytkownika"));
    }

    public User activateUser(Long userId) {
        User user = userRepository.findById(userId)
                .orElseThrow(() -> new RuntimeException("UÅ¼ytkownik nie znaleziony"));

        // UÅ¼ycie procedury aktualizacji - aktywacja
        userRepository.updateUser(
                user.getId(),
                user.getUsername(),
                user.getEmail(),
                user.getPassword(),
                user.getRole(),
                true
        );

        return userRepository.findById(userId)
                .orElseThrow(() -> new RuntimeException("BÅ‚Ä…d podczas aktywacji uÅ¼ytkownika"));
    }

    public User deactivateUser(Long userId) {
        User user = userRepository.findById(userId)
                .orElseThrow(() -> new RuntimeException("UÅ¼ytkownik nie znaleziony"));

        // UÅ¼ycie procedury aktualizacji - deaktywacja
        userRepository.updateUser(
                user.getId(),
                user.getUsername(),
                user.getEmail(),
                user.getPassword(),
                user.getRole(),
                false
        );

        return userRepository.findById(userId)
                .orElseThrow(() -> new RuntimeException("BÅ‚Ä…d podczas deaktywacji uÅ¼ytkownika"));
    }

    public User changeUserRole(Long userId, String newRole) {
        User user = userRepository.findById(userId)
                .orElseThrow(() -> new RuntimeException("UÅ¼ytkownik nie znaleziony"));

        // UÅ¼ycie procedury aktualizacji roli
        userRepository.updateUser(
                user.getId(),
                user.getUsername(),
                user.getEmail(),
                user.getPassword(),
                newRole,
                user.getEnabled()
        );

        return userRepository.findById(userId)
                .orElseThrow(() -> new RuntimeException("BÅ‚Ä…d podczas zmiany roli uÅ¼ytkownika"));
    }

    // ==================== METODY USUWANIA ====================

    public void deleteUser(Long id) {
        if (!userRepository.existsById(id)) {
            throw new RuntimeException("UÅ¼ytkownik nie znaleziony");
        }
        // UÅ¼ycie procedury usuwania
        userRepository.deleteUser(id);
    }

    public void deleteUserByUsername(String username) {
        User user = userRepository.findByUsername(username)
                .orElseThrow(() -> new RuntimeException("UÅ¼ytkownik nie znaleziony"));
        // UÅ¼ycie procedury usuwania
        userRepository.deleteUser(user.getId());
    }

    // ==================== METODY WALIDACJI I SPRAWDZANIA ====================

    public boolean usernameExists(String username) {
        return userRepository.existsByUsername(username);
    }

    public boolean emailExists(String email) {
        return userRepository.existsByEmail(email);
    }

    public boolean existsById(Long id) {
        return userRepository.existsById(id);
    }

    public long count() {
        return userRepository.count();
    }

    public long countByRole(String role) {
        return userRepository.countByRole(role);
    }

    public long countActiveUsers() {
        return userRepository.findActiveUsers().size();
    }

    public long countInactiveUsers() {
        return userRepository.findInactiveUsers().size();
    }

    // ==================== METODY SPECJALNE ====================

    public List<User> findByRole(String role) {
        return userRepository.findByRole(role);
    }

    public List<User> findActiveUsers() {
        return userRepository.findActiveUsers();
    }

    public List<User> findInactiveUsers() {
        return userRepository.findInactiveUsers();
    }

    public List<User> findAdmins() {
        return findByRole("ADMIN");
    }

    public List<User> findUsers() {
        return findByRole("USER");
    }

    public boolean isUserActive(Long userId) {
        return userRepository.findById(userId)
                .map(User::getEnabled)
                .orElse(false);
    }

    public boolean isUserAdmin(Long userId) {
        return userRepository.findById(userId)
                .map(user -> "ADMIN".equals(user.getRole()))
                .orElse(false);
    }

    public boolean isUserRegular(Long userId) {
        return userRepository.findById(userId)
                .map(user -> "USER".equals(user.getRole()))
                .orElse(false);
    }

    // ==================== METODY POMOCNICZE ====================

    public void validateUserCredentials(String username, String password) {
        User user = userRepository.findByUsername(username)
                .orElseThrow(() -> new RuntimeException("UÅ¼ytkownik nie znaleziony"));

        if (!passwordEncoder.matches(password, user.getPassword())) {
            throw new RuntimeException("NieprawidÅ‚owe hasÅ‚o");
        }
    }

    public boolean verifyPassword(Long userId, String rawPassword) {
        User user = userRepository.findById(userId)
                .orElseThrow(() -> new RuntimeException("UÅ¼ytkownik nie znaleziony"));

        return passwordEncoder.matches(rawPassword, user.getPassword());
    }

    public User resetPassword(Long userId, String newPassword) {
        User user = userRepository.findById(userId)
                .orElseThrow(() -> new RuntimeException("UÅ¼ytkownik nie znaleziony"));

        String encodedPassword = passwordEncoder.encode(newPassword);

        // UÅ¼ycie procedury aktualizacji hasÅ‚a
        userRepository.updateUser(
                user.getId(),
                user.getUsername(),
                user.getEmail(),
                encodedPassword,
                user.getRole(),
                user.getEnabled()
        );

        return userRepository.findById(userId)
                .orElseThrow(() -> new RuntimeException("BÅ‚Ä…d podczas resetowania hasÅ‚a"));
    }

    // ==================== METODY RAPORTOWANIA ====================

    public UserStatistics getUserStatistics() {
        Map<String, Object> stats = userRepository.getUserStatisticsNative();

        return new UserStatistics(
                ((Number) stats.get("total_users")).longValue(),
                ((Number) stats.get("active_users")).longValue(),
                ((Number) stats.get("inactive_users")).longValue(),
                ((Number) stats.get("admin_users")).longValue(),
                ((Number) stats.get("regular_users")).longValue()
        );
    }

    // Klasa pomocnicza dla statystyk
    @Getter
    public static class UserStatistics {
        private final long totalUsers;
        private final long activeUsers;
        private final long inactiveUsers;
        private final long adminUsers;
        private final long regularUsers;

        public UserStatistics(long totalUsers, long activeUsers, long inactiveUsers, long adminUsers, long regularUsers) {
            this.totalUsers = totalUsers;
            this.activeUsers = activeUsers;
            this.inactiveUsers = inactiveUsers;
            this.adminUsers = adminUsers;
            this.regularUsers = regularUsers;
        }
    }
}


ŒCIE¯KA: src\main\java\pl\komis\service\ZakupService.java
------------------------------------------------------------
package pl.komis.service;

import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;
import pl.komis.model.Zakup;
import pl.komis.repository.ZakupRepository;

import java.time.LocalDate;
import java.util.List;
import java.util.NoSuchElementException;

@Service
@RequiredArgsConstructor
public class ZakupService {

    private final ZakupRepository zakupRepository;

    public List<Zakup> findAll() {
        return zakupRepository.findAll();
    }

    public Zakup getById(Long id) {
        return zakupRepository.findById(id)
                .orElseThrow(() -> new NoSuchElementException("Zakup o ID " + id + " nie istnieje"));
    }

    public Zakup save(Zakup zakup) {
        return zakupRepository.save(zakup);
    }

    public void remove(Long id) {
        zakupRepository.deleteById(id);
    }

    public List<Zakup> findByKlientId(Long id) {
        return zakupRepository.findByKlientId(id);
    }

    public List<Zakup> findByPracownikId(Long id) {
        return zakupRepository.findByPracownikId(id);
    }

    public List<Zakup> findByDateRange(LocalDate od, LocalDate do_) {
        return zakupRepository.findByDataZakupuBetween(od, do_);
    }
}



ŒCIE¯KA: src\main\resources\application.yml
----------------------------------------------
spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/komis
    username: postgres
    password: student
    driver-class-name: org.postgresql.Driver
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
    database-platform: org.hibernate.dialect.PostgreSQLDialect

server:
  port: 8080


ŒCIE¯KA: src\main\resources\templates\error.html
---------------------------------------------------
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>BÅ‚Ä…d</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-4">
    <h1>WystÄ…piÅ‚ bÅ‚Ä…d</h1>
    <p>Przepraszamy, wystÄ…piÅ‚ problem z aplikacjÄ….</p>
    <a href="/" class="btn btn-primary">PowrÃ³t do strony gÅ‚Ã³wnej</a>
</div>
</body>
</html>


ŒCIE¯KA: src\main\resources\templates\index.html
---------------------------------------------------
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title th:text="${tytul}">Komis Samochodowy</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .car-card-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 5px 5px 0 0;
        }
        .no-card-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
            border-radius: 5px 5px 0 0;
        }
        .car-card {
            transition: transform 0.2s ease-in-out;
            height: 100%;
        }
        .car-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        .status-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 1;
        }
    </style>
</head>
<body>
<div th:replace="fragments/navbar :: main-nav"></div>

<div class="container mt-4">
    <!-- Komunikat o wylogowaniu -->
    <div th:if="${param.logout}" class="alert alert-success alert-dismissible fade show" role="alert">
        ZostaÅ‚eÅ› pomyÅ›lnie wylogowany!
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>

    <div class="row align-items-center mb-5">
        <div class="col-md-8">
            <h1>ðŸš— Komis Samochodowy</h1>
            <p class="lead mb-0">Witamy w naszym komisie! PrzeglÄ…daj naszÄ… ofertÄ™ samochodÃ³w z peÅ‚nymi szczegÃ³Å‚ami technicznymi.</p>
        </div>
        <div class="col-md-4 text-end">
            <a th:href="@{/samochody}" class="btn btn-primary btn-lg">
                <i class="fas fa-car"></i> Zobacz wszystkie samochody
            </a>

            <!-- Przyciski tylko dla admina -->
            <div sec:authorize="hasRole('ADMIN')">
                <a th:href="@{/klienci}" class="btn btn-secondary btn-lg ms-2">
                    <i class="fas fa-users"></i> Klienci
                </a>
                <a th:href="@{/pracownicy}" class="btn btn-secondary btn-lg ms-2">
                    <i class="fas fa-user-tie"></i> Pracownicy
                </a>
            </div>
        </div>
    </div>

    <div class="row mb-5">
        <div class="col-12">
            <div class="card bg-light">
                <div class="card-body text-center">
                    <h3 class="card-title">ðŸ† Najlepsze oferty w mieÅ›cie!</h3>
                    <p class="card-text mb-0">
                        SprawdÅº naszÄ… aktualnÄ… ofertÄ™. KaÅ¼dy samochÃ³d przeszedÅ‚ szczegÃ³Å‚owÄ… kontrolÄ™ technicznÄ….<br>
                        <strong>Zaloguj siÄ™, aby zobaczyÄ‡ peÅ‚ne szczegÃ³Å‚y i zarezerwowaÄ‡ wybrany model.</strong>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <h2 class="mb-4 text-center">ðŸš€ Ostatnio dodane</h2>
    <div class="row">
        <div th:each="samochod : ${samochody}" class="col-lg-4 col-md-6 mb-4">
            <div class="card car-card h-100">
                <!-- ZdjÄ™cie samochodu -->
                <div class="position-relative">
                    <div th:if="${samochod.zdjecieUrl != null and samochod.zdjecieUrl != ''}">
                        <img th:src="${samochod.zdjecieUrl}"
                             th:alt="${samochod.marka + ' ' + samochod.model}"
                             class="car-card-image">
                    </div>
                    <div th:if="${samochod.zdjecieUrl == null or samochod.zdjecieUrl == ''}" class="no-card-image">
                        <i class="fas fa-car"></i>
                    </div>

                    <!-- Status badge -->
                    <span th:if="${samochod.status == 'DOSTEPNY'}"
                          class="badge bg-success status-badge" th:text="${samochod.status}"></span>
                    <span th:if="${samochod.status == 'SPRZEDANY'}"
                          class="badge bg-danger status-badge" th:text="${samochod.status}"></span>
                    <span th:if="${samochod.status == 'ZAREZERWOWANY'}"
                          class="badge bg-warning status-badge" th:text="${samochod.status}"></span>
                </div>

                <div class="card-body d-flex flex-column">
                    <h5 class="card-title" th:text="${samochod.marka + ' ' + samochod.model}"></h5>

                    <div class="row mb-2">
                        <div class="col-6">
                            <small class="text-muted">Rok:</small><br>
                            <strong th:text="${samochod.rokProdukcji}"></strong>
                        </div>
                        <div class="col-6">
                            <small class="text-muted">Przebieg:</small><br>
                            <strong th:text="${#numbers.formatInteger(samochod.przebieg, 0, 'COMMA') + ' km'}"></strong>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-12">
                            <small class="text-muted">Paliwo:</small><br>
                            <strong th:text="${samochod.rodzajPaliwa}"></strong>
                        </div>
                    </div>

                    <div class="mt-auto">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                                <span class="h4 text-success mb-0"
                                      th:text="${#numbers.formatDecimal(samochod.cena, 0, 'COMMA', 2, 'POINT') + ' zÅ‚'}"></span>
                        </div>

                        <!-- Przyciski akcji -->
                        <div sec:authorize="isAuthenticated()" class="d-grid">
                            <a th:href="@{/samochody/szczegoly(id=${samochod.id})}"
                               class="btn btn-outline-primary">
                                <i class="fas fa-search"></i> Zobacz szczegÃ³Å‚y
                            </a>
                        </div>

                        <div sec:authorize="!isAuthenticated()" class="d-grid">
                            <a th:href="@{/samochody/szczegoly(id=${samochod.id})}"
                               class="btn btn-outline-primary">
                                <i class="fas fa-search"></i> Zobacz szczegÃ³Å‚y
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div th:if="${samochody.empty}" class="alert alert-info text-center">
        <i class="fas fa-info-circle fa-2x mb-3"></i><br>
        Brak samochodÃ³w w ofercie. SprawdÅº pÃ³Åºniej!
    </div>

    <!-- Informacja o koniecznoÅ›ci logowania - POKAZUJ TYLKO DLA NIEZALOGOWANYCH -->
    <div th:if="${not isAuthenticated}" class="row mt-5">
        <div class="col-12">
            <div class="card border-warning">
                <div class="card-body text-center">
                    <h4 class="text-warning"><i class="fas fa-exclamation-triangle"></i> WaÅ¼na informacja</h4>
                    <p class="mb-0">
                        Aby zobaczyÄ‡ peÅ‚ne szczegÃ³Å‚y techniczne, zdjÄ™cia w wysokiej rozdzielczoÅ›ci
                        oraz mÃ³c rezerwowaÄ‡ i kupowaÄ‡ samochody, <strong>musisz siÄ™ zalogowaÄ‡</strong>.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal z informacjÄ… o koniecznoÅ›ci logowania -->
<div class="modal fade" id="loginInfoModal" tabindex="-1" aria-labelledby="loginInfoModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginInfoModalLabel">
                    <i class="fas fa-info-circle text-primary"></i> Informacja
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>Aby zobaczyÄ‡ peÅ‚ne szczegÃ³Å‚y tego samochodu, musisz siÄ™ zalogowaÄ‡.</p>
                <div class="alert alert-info">
                    <strong>Po zalogowaniu bÄ™dziesz mÃ³gÅ‚:</strong>
                    <ul class="mb-0 mt-2">
                        <li>ZobaczyÄ‡ wszystkie parametry techniczne</li>
                        <li>ObejrzeÄ‡ zdjÄ™cia w wysokiej rozdzielczoÅ›ci</li>
                        <li>ZarezerwowaÄ‡ wybrany samochÃ³d</li>
                        <li>SkontaktowaÄ‡ siÄ™ w sprawie zakupu</li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">PÃ³Åºniej</button>
                <a href="/login" class="btn btn-primary">
                    <i class="fas fa-sign-in-alt"></i> PrzejdÅº do logowania
                </a>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>


ŒCIE¯KA: src\main\resources\templates\klienci.html
-----------------------------------------------------
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title th:text="${tytul}">Lista KlientÃ³w</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
        <a class="navbar-brand" href="/">ðŸš— Komis Samochodowy</a>

        <div class="navbar-nav">
            <div sec:authorize="hasRole('ADMIN')">
                <a class="nav-link" th:href="@{/klienci}">Klienci</a>
                <a class="nav-link" th:href="@{/pracownicy}">Pracownicy</a>
            </div>
        </div>

        <div class="navbar-nav ms-auto">
            <div sec:authorize="isAuthenticated()">
                <span class="navbar-text me-3">Witaj, <span sec:authentication="name"></span></span>
                <a class="nav-link d-inline" href="#" th:href="@{/logout}">Wyloguj</a>
            </div>
        </div>
    </div>
</nav>

<div class="container mt-4">
    <h1 class="mb-4 text-center" th:text="${tytul}">Lista KlientÃ³w</h1>

    <div th:if="${klienci.empty}" class="alert alert-info text-center">
        Brak klientÃ³w w bazie danych.
    </div>

    <table th:if="${!klienci.empty}" class="table table-striped">
        <thead class="table-dark">
        <tr>
            <th>ID</th>
            <th>Nazwa uÅ¼ytkownika</th>
            <th>Email</th>
            <th>Rola</th>
            <th>Status</th>
            <th>Data utworzenia</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="klient : ${klienci}">
            <td th:text="${klient.id}"></td>
            <td th:text="${klient.username}"></td>
            <td th:text="${klient.email}"></td>
            <td>
                <span th:if="${klient.role == 'USER'}" class="badge bg-primary" th:text="${klient.role}"></span>
                <span th:if="${klient.role == 'ADMIN'}" class="badge bg-success" th:text="${klient.role}"></span>
            </td>
            <td>
                <span th:if="${klient.enabled}" class="badge bg-success">Aktywny</span>
                <span th:if="${!klient.enabled}" class="badge bg-danger">Nieaktywny</span>
            </td>
            <td th:text="${klient.createdAt}"></td>
        </tr>
        </tbody>
    </table>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>


ŒCIE¯KA: src\main\resources\templates\login.html
---------------------------------------------------
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Logowanie - Komis Samochodowy</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .login-container {
            max-width: 400px;
            margin: 100px auto;
            padding: 30px;
            border: 1px solid #ddd;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        .brand-header {
            text-align: center;
            margin-bottom: 30px;
        }
        .brand-header h2 {
            color: #333;
            margin-bottom: 10px;
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            padding: 12px;
        }
        .btn-primary:hover {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
            transform: translateY(-2px);
            transition: all 0.3s ease;
        }
    </style>
</head>
<body>
<div th:replace="fragments/navbar :: main-nav"></div>

<div class="container">
    <div class="login-container">
        <div class="brand-header">
            <h2>ðŸš— Komis Samochodowy</h2>
            <p class="text-muted">Zaloguj siÄ™ do swojego konta</p>
        </div>

        <!-- Komunikat sukcesu (np. po rejestracji) -->
        <div th:if="${successMessage}" class="alert alert-success alert-dismissible fade show" role="alert">
            <i class="fas fa-check-circle"></i>
            <span th:text="${successMessage}"></span>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>

        <!-- Komunikat o wylogowaniu -->
        <div th:if="${param.logout}" class="alert alert-info alert-dismissible fade show" role="alert">
            <i class="fas fa-info-circle"></i>
            ZostaÅ‚eÅ› pomyÅ›lnie wylogowany!
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>

        <!-- Komunikat o bÅ‚Ä™dzie logowania -->
        <div th:if="${param.error}" class="alert alert-danger alert-dismissible fade show" role="alert">
            <i class="fas fa-exclamation-triangle"></i>
            NieprawidÅ‚owa nazwa uÅ¼ytkownika lub hasÅ‚o!
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>

        <form th:action="@{/login}" method="post">
            <div class="mb-3">
                <label for="username" class="form-label">
                    <i class="fas fa-user"></i> Nazwa uÅ¼ytkownika:
                </label>
                <input type="text" class="form-control" id="username" name="username"
                       placeholder="WprowadÅº nazwÄ™ uÅ¼ytkownika" required
                       th:classappend="${param.error != null} ? 'is-invalid' : ''">
                <div class="invalid-feedback" th:if="${param.error}">
                    SprawdÅº poprawnoÅ›Ä‡ nazwy uÅ¼ytkownika
                </div>
            </div>

            <div class="mb-3">
                <label for="password" class="form-label">
                    <i class="fas fa-lock"></i> HasÅ‚o:
                </label>
                <input type="password" class="form-control" id="password" name="password"
                       placeholder="WprowadÅº hasÅ‚o" required
                       th:classappend="${param.error != null} ? 'is-invalid' : ''">
                <div class="invalid-feedback" th:if="${param.error}">
                    SprawdÅº poprawnoÅ›Ä‡ hasÅ‚a
                </div>
            </div>

            <div class="mb-3 form-check">
                <input type="checkbox" class="form-check-input" id="rememberMe" name="remember-me">
                <label class="form-check-label" for="rememberMe">ZapamiÄ™taj mnie</label>
            </div>

            <button type="submit" class="btn btn-primary w-100 btn-lg">
                <i class="fas fa-sign-in-alt"></i> Zaloguj siÄ™
            </button>
        </form>

        <div class="mt-4 text-center">
            <p class="mb-3">Nie masz konta?</p>
            <a href="/register" class="btn btn-outline-primary w-100">
                <i class="fas fa-user-plus"></i> Zarejestruj siÄ™
            </a>
        </div>

        <hr class="my-4">

        <div class="text-center">
            <small class="text-muted">
                <strong>Dane testowe:</strong><br>
                <strong>admin/admin</strong> - peÅ‚ny dostÄ™p administracyjny<br>
                <strong>user/user</strong> - podstawowy dostÄ™p uÅ¼ytkownika
            </small>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
    // Dodanie animacji dla pÃ³l formularza
    document.addEventListener('DOMContentLoaded', function() {
        const inputs = document.querySelectorAll('input[type="text"], input[type="password"]');
        inputs.forEach(input => {
            input.addEventListener('focus', function() {
                this.parentElement.classList.add('focused');
            });
            input.addEventListener('blur', function() {
                if (this.value === '') {
                    this.parentElement.classList.remove('focused');
                }
            });
        });
    });
</script>
</body>
</html>


ŒCIE¯KA: src\main\resources\templates\pracownicy.html
--------------------------------------------------------
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title th:text="${tytul}">Lista PracownikÃ³w</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
        <a class="navbar-brand" href="/">ðŸš— Komis Samochodowy</a>

        <div class="navbar-nav">
            <div sec:authorize="hasRole('ADMIN')">
                <a class="nav-link" th:href="@{/klienci}">Klienci</a>
                <a class="nav-link" th:href="@{/pracownicy}">Pracownicy</a>
            </div>
        </div>

        <div class="navbar-nav ms-auto">
            <div sec:authorize="isAuthenticated()">
                <span class="navbar-text me-3">Witaj, <span sec:authentication="name"></span></span>
                <a class="nav-link d-inline" href="#" th:href="@{/logout}">Wyloguj</a>
            </div>
        </div>
    </div>
</nav>

<div class="container mt-4">
    <h1 class="mb-4 text-center" th:text="${tytul}">Lista PracownikÃ³w</h1>

    <div th:if="${pracownicy.empty}" class="alert alert-info text-center">
        <i class="fas fa-info-circle"></i> Brak pracownikÃ³w w systemie.
    </div>

    <div th:if="${!pracownicy.empty}">
        <table class="table table-striped table-bordered">
            <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>Nazwa uÅ¼ytkownika</th>
                <th>Email</th>
                <th>Rola</th>
                <th>Status</th>
                <th>Data utworzenia</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="pracownik : ${pracownicy}">
                <td th:text="${pracownik.id}"></td>
                <td th:text="${pracownik.username}"></td>
                <td th:text="${pracownik.email}"></td>
                <td>
                    <span class="badge bg-success" th:text="${pracownik.role}"></span>
                </td>
                <td>
                    <span th:if="${pracownik.enabled}" class="badge bg-success">Aktywny</span>
                    <span th:if="${!pracownik.enabled}" class="badge bg-danger">Nieaktywny</span>
                </td>
                <td th:text="${pracownik.createdAt}"></td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>


ŒCIE¯KA: src\main\resources\templates\register.html
------------------------------------------------------
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${tytul}">Rejestracja - Komis Samochodowy</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .register-container {
            max-width: 500px;
            margin: 50px auto;
            padding: 30px;
            border: 1px solid #ddd;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
<div th:replace="fragments/navbar :: main-nav"></div>

<div class="container">
    <div class="register-container">
        <h2 class="text-center mb-4">ðŸš— Rejestracja</h2>

        <!-- Komunikat sukcesu -->
        <div th:if="${successMessage}" class="alert alert-success alert-dismissible fade show" role="alert">
            <span th:text="${successMessage}"></span>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>

        <!-- Komunikat bÅ‚Ä™du -->
        <div th:if="${errorMessage}" class="alert alert-danger alert-dismissible fade show" role="alert">
            <span th:text="${errorMessage}"></span>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>

        <form th:action="@{/register}" th:object="${registerRequest}" method="post">
            <div class="mb-3">
                <label for="username" class="form-label">Nazwa uÅ¼ytkownika *</label>
                <input type="text" class="form-control" id="username"
                       th:field="*{username}" required minlength="3" maxlength="50">
                <div class="form-text">Minimum 3 znaki</div>
                <div th:if="${#fields.hasErrors('username')}" class="text-danger">
                    <span th:errors="*{username}"></span>
                </div>
            </div>

            <div class="mb-3">
                <label for="email" class="form-label">Email *</label>
                <input type="email" class="form-control" id="email"
                       th:field="*{email}" required>
                <div th:if="${#fields.hasErrors('email')}" class="text-danger">
                    <span th:errors="*{email}"></span>
                </div>
            </div>

            <div class="mb-3">
                <label for="password" class="form-label">HasÅ‚o *</label>
                <input type="password" class="form-control" id="password"
                       th:field="*{password}" required minlength="6">
                <div class="form-text">Minimum 6 znakÃ³w</div>
                <div th:if="${#fields.hasErrors('password')}" class="text-danger">
                    <span th:errors="*{password}"></span>
                </div>
            </div>

            <div class="mb-3">
                <label for="confirmPassword" class="form-label">PotwierdÅº hasÅ‚o *</label>
                <input type="password" class="form-control" id="confirmPassword"
                       th:field="*{confirmPassword}" required>
                <div th:if="${#fields.hasErrors('confirmPassword')}" class="text-danger">
                    <span th:errors="*{confirmPassword}"></span>
                </div>
            </div>

            <button type="submit" class="btn btn-primary w-100 btn-lg">Zarejestruj siÄ™</button>
        </form>

        <div class="mt-3 text-center">
            <p>Masz juÅ¼ konto? <a href="/login">Zaloguj siÄ™</a></p>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>


ŒCIE¯KA: src\main\resources\templates\samochody.html
-------------------------------------------------------
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Lista SamochodÃ³w - Komis</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-4">
    <h1>Lista SamochodÃ³w</h1>
    <a href="/" class="btn btn-secondary mb-3">â† PowrÃ³t do strony gÅ‚Ã³wnej</a>

    <div class="table-responsive">
        <table class="table table-striped">
            <thead>
            <tr>
                <th>ID</th>
                <th>Marka</th>
                <th>Model</th>
                <th>Rok</th>
                <th>Cena</th>
                <th>Kolor</th>
                <th>Przebieg</th>
                <th>Status</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="samochod : ${samochody}">
                <td th:text="${samochod.id}"></td>
                <td th:text="${samochod.marka}"></td>
                <td th:text="${samochod.model}"></td>
                <td th:text="${samochod.rokProdukcji}"></td>
                <td th:text="${samochod.cena + ' zÅ‚'}"></td>
                <td th:text="${samochod.kolor}"></td>
                <td th:text="${samochod.przebieg + ' km'}"></td>
                <td>
                            <span th:if="${samochod.status == 'DOSTEPNY'}"
                                  class="badge bg-success" th:text="${samochod.status}"></span>
                    <span th:if="${samochod.status == 'SPRZEDANY'}"
                          class="badge bg-danger" th:text="${samochod.status}"></span>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
</body>
</html>


ŒCIE¯KA: src\main\resources\templates\zakupy_form.html
---------------------------------------------------------
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Formularz zakupu</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
<div class="container mt-4">

    <h1 th:text="${zakup.id == null ? 'Dodaj zakup' : 'Edytuj zakup'}"></h1>

    <form th:action="@{${zakup.id == null} ? '/zakupy/dodaj' : '/zakupy/edytuj/' + ${zakup.id}}"
          th:object="${zakup}" method="post">

        <div class="mb-3">
            <label class="form-label">SamochÃ³d</label>
            <select class="form-select" th:field="*{samochod}">
                <option th:each="s : ${samochody}"
                        th:value="${s}"
                        th:text="${s.marka + ' ' + s.model}">
                </option>
            </select>
        </div>

        <div class="mb-3">
            <label class="form-label">Klient</label>
            <select class="form-select" th:field="*{klient}">
                <option th:each="k : ${klienci}"
                        th:value="${k}"
                        th:text="${k.imie + ' ' + k.nazwisko}">
                </option>
            </select>
        </div>

        <div class="mb-3">
            <label class="form-label">Pracownik</label>
            <select class="form-select" th:field="*{pracownik}">
                <option th:each="p : ${pracownicy}"
                        th:value="${p}"
                        th:text="${p.imie + ' ' + p.nazwisko}">
                </option>
            </select>
        </div>

        <div class="mb-3">
            <label>Data zakupu</label>
            <input type="date" class="form-control" th:field="*{dataZakupu}">
        </div>

        <div class="mb-3">
            <label>Cena zakupu</label>
            <input type="number" step="0.01" class="form-control" th:field="*{cenaZakupu}">
        </div>

        <button type="submit" class="btn btn-success">Zapisz</button>
        <a th:href="@{/zakupy}" class="btn btn-secondary">Anuluj</a>

    </form>
</div>

</body>
</html>



ŒCIE¯KA: src\main\resources\templates\zakupy_lista.html
----------------------------------------------------------
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Lista ZakupÃ³w</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<div class="container mt-4">
    <h1 class="mb-4 text-center">Lista zakupÃ³w</h1>

    <div th:if="${zakupy.empty}" class="alert alert-info text-center">
        Brak zakupÃ³w w systemie.
    </div>

    <table th:if="${!zakupy.empty}" class="table table-striped table-bordered">
        <thead class="table-dark">
        <tr>
            <th>ID</th>
            <th>SamochÃ³d</th>
            <th>Klient</th>
            <th>Pracownik</th>
            <th>Data zakupu</th>
            <th>Cena</th>
            <th>Akcje</th>
        </tr>
        </thead>

        <tbody>
        <tr th:each="z : ${zakupy}">
            <td th:text="${z.id}"></td>
            <td th:text="${z.samochod.marka + ' ' + z.samochod.model}"></td>
            <td th:text="${z.klient.imie + ' ' + z.klient.nazwisko}"></td>
            <td th:text="${z.pracownik.imie + ' ' + z.pracownik.nazwisko}"></td>
            <td th:text="${z.dataZakupu}"></td>
            <td th:text="${z.cenaZakupu}"></td>

            <td>
                <a th:href="@{'/zakupy/edytuj/' + ${z.id}}" class="btn btn-primary btn-sm">Edytuj</a>
                <a th:href="@{'/zakupy/usun/' + ${z.id}}" class="btn btn-danger btn-sm"
                   onclick="return confirm('Na pewno usunÄ…Ä‡?');">UsuÅ„</a>
            </td>
        </tr>
        </tbody>
    </table>

    <a th:href="@{/zakupy/dodaj}" class="btn btn-success mt-3">Dodaj zakup</a>
</div>

</body>
</html>



ŒCIE¯KA: src\main\resources\templates\admin\change-password.html
-------------------------------------------------------------------
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${tytul}">Zmiana hasÅ‚a</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
        <a class="navbar-brand" href="/">ðŸš— Komis Samochodowy</a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
            <div class="navbar-nav">
                <a class="nav-link" href="/samochody">Samochody</a>
                <div class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                        Admin
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="/admin">Panel Admina</a></li>
                        <li><a class="dropdown-item" href="/admin/users">UÅ¼ytkownicy</a></li>
                        <li><a class="dropdown-item" href="/klienci">Klienci</a></li>
                        <li><a class="dropdown-item" href="/pracownicy">Pracownicy</a></li>
                    </ul>
                </div>
            </div>

            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="/admin/users">UÅ¼ytkownicy</a>
                <a class="nav-link" href="/admin">Panel Admina</a>
                <a class="nav-link" href="/">Strona GÅ‚Ã³wna</a>
            </div>
        </div>
    </div>
</nav>

<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header">
                    <h4 class="mb-0" th:text="${tytul}">Zmiana hasÅ‚a</h4>
                </div>
                <div class="card-body">
                    <!-- Komunikaty -->
                    <div th:if="${successMessage}" class="alert alert-success alert-dismissible fade show" role="alert">
                        <i class="fas fa-check-circle"></i>
                        <span th:text="${successMessage}"></span>
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>

                    <div th:if="${errorMessage}" class="alert alert-danger alert-dismissible fade show" role="alert">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span th:text="${errorMessage}"></span>
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>

                    <div class="alert alert-info">
                        <i class="fas fa-info-circle"></i>
                        Zmieniasz hasÅ‚o dla uÅ¼ytkownika: <strong th:text="${user.username}"></strong>
                    </div>

                    <form th:action="@{/admin/users/change-password/{id}(id=${user.id})}" method="post">
                        <div class="mb-3">
                            <label for="newPassword" class="form-label">Nowe hasÅ‚o *</label>
                            <input type="password" class="form-control" id="newPassword"
                                   name="newPassword" required minlength="6">
                            <div class="form-text">Minimum 6 znakÃ³w</div>
                        </div>

                        <div class="mb-3">
                            <label for="confirmPassword" class="form-label">PotwierdÅº nowe hasÅ‚o *</label>
                            <input type="password" class="form-control" id="confirmPassword"
                                   name="confirmPassword" required minlength="6">
                        </div>

                        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                            <a href="/admin/users" class="btn btn-secondary me-md-2">Anuluj</a>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-key"></i> ZmieÅ„ hasÅ‚o
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Walidacja zgodnoÅ›ci haseÅ‚
    document.addEventListener('DOMContentLoaded', function() {
        const form = document.querySelector('form');
        const newPassword = document.getElementById('newPassword');
        const confirmPassword = document.getElementById('confirmPassword');

        form.addEventListener('submit', function(e) {
            if (newPassword.value !== confirmPassword.value) {
                e.preventDefault();
                alert('HasÅ‚a nie sÄ… identyczne!');
                confirmPassword.focus();
            }
        });
    });
</script>
</body>
</html>


ŒCIE¯KA: src\main\resources\templates\admin\panel.html
---------------------------------------------------------
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Panel Administracyjny</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
        <a class="navbar-brand" href="/">ðŸš— Komis Samochodowy</a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
            <div class="navbar-nav">
                <a class="nav-link" href="/samochody">Samochody</a>
                <a class="nav-link" href="/search">
                    <i class="fas fa-search me-1"></i> Wyszukiwanie
                </a>
                <div class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                        Admin
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="/admin">Panel Admina</a></li>
                        <li><a class="dropdown-item" href="/admin/users">UÅ¼ytkownicy</a></li>
                        <li><a class="dropdown-item" href="/klienci">Klienci</a></li>
                        <li><a class="dropdown-item" href="/pracownicy">Pracownicy</a></li>
                    </ul>
                </div>
            </div>

            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="/">Strona GÅ‚Ã³wna</a>
                <a class="nav-link" href="#" th:href="@{/logout}">Wyloguj</a>
            </div>
        </div>
    </div>
</nav>

<div class="container mt-4">
    <h1 class="mb-4 text-center"><i class="fas fa-cogs"></i> Panel Administracyjny</h1>

    <div class="row">
        <!-- Statystyki -->
        <div class="col-md-4 mb-4">
            <div class="card text-white bg-primary">
                <div class="card-body text-center">
                    <i class="fas fa-users fa-3x mb-3"></i>
                    <h3 th:text="${totalUsers}">0</h3>
                    <p class="card-text">UÅ¼ytkownikÃ³w</p>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card text-white bg-success">
                <div class="card-body text-center">
                    <i class="fas fa-car fa-3x mb-3"></i>
                    <h3 th:text="${totalCars}">0</h3>
                    <p class="card-text">SamochodÃ³w</p>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-4">
            <div class="card text-white bg-info">
                <div class="card-body text-center">
                    <i class="fas fa-car-side fa-3x mb-3"></i>
                    <h3 th:text="${availableCars}">0</h3>
                    <p class="card-text">DostÄ™pnych</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Szybkie akcje -->
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0"><i class="fas fa-bolt"></i> Szybkie akcje</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-3 mb-3">
                            <a href="/admin/users" class="btn btn-outline-primary w-100">
                                <i class="fas fa-users-cog"></i><br>
                                ZarzÄ…dzaj uÅ¼ytkownikami
                            </a>
                        </div>
                        <div class="col-md-3 mb-3">
                            <a href="/samochody/nowy" class="btn btn-outline-success w-100">
                                <i class="fas fa-car"></i><br>
                                Dodaj samochÃ³d
                            </a>
                        </div>
                        <div class="col-md-3 mb-3">
                            <a href="/samochody" class="btn btn-outline-info w-100">
                                <i class="fas fa-list"></i><br>
                                PrzeglÄ…daj samochody
                            </a>
                        </div>
                        <div class="col-md-3 mb-3">
                            <a href="/klienci" class="btn btn-outline-warning w-100">
                                <i class="fas fa-user-friends"></i><br>
                                Lista klientÃ³w
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>


ŒCIE¯KA: src\main\resources\templates\admin\user-form.html
-------------------------------------------------------------
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${tytul}">Formularz uÅ¼ytkownika</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
        <a class="navbar-brand" href="/">ðŸš— Komis Samochodowy</a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
            <div class="navbar-nav">
                <a class="nav-link" href="/samochody">Samochody</a>
                <div class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                        Admin
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="/admin">Panel Admina</a></li>
                        <li><a class="dropdown-item" href="/admin/users">UÅ¼ytkownicy</a></li>
                        <li><a class="dropdown-item" href="/klienci">Klienci</a></li>
                        <li><a class="dropdown-item" href="/pracownicy">Pracownicy</a></li>
                    </ul>
                </div>
            </div>

            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="/admin/users">UÅ¼ytkownicy</a>
                <a class="nav-link" href="/admin">Panel Admina</a>
                <a class="nav-link" href="/">Strona GÅ‚Ã³wna</a>
            </div>
        </div>
    </div>
</nav>

<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header">
                    <h4 class="mb-0" th:text="${tytul}">Formularz uÅ¼ytkownika</h4>
                </div>
                <div class="card-body">
                    <!-- Komunikaty -->
                    <div th:if="${successMessage}" class="alert alert-success alert-dismissible fade show" role="alert">
                        <i class="fas fa-check-circle"></i>
                        <span th:text="${successMessage}"></span>
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>

                    <div th:if="${errorMessage}" class="alert alert-danger alert-dismissible fade show" role="alert">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span th:text="${errorMessage}"></span>
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>

                    <!-- Formularz dla nowego uÅ¼ytkownika -->
                    <form th:if="${user.id == null}" th:action="@{/admin/users/create}"
                          method="post" th:object="${user}">

                        <div class="mb-3">
                            <label for="username" class="form-label">Nazwa uÅ¼ytkownika *</label>
                            <input type="text" class="form-control" id="username"
                                   th:field="*{username}" required minlength="3" maxlength="50">
                            <div class="form-text">Minimum 3 znaki</div>
                        </div>

                        <div class="mb-3">
                            <label for="email" class="form-label">Email *</label>
                            <input type="email" class="form-control" id="email"
                                   th:field="*{email}" required>
                        </div>

                        <div class="mb-3">
                            <label for="password" class="form-label">HasÅ‚o *</label>
                            <input type="password" class="form-control" id="password"
                                   name="password" required minlength="6">
                            <div class="form-text">Minimum 6 znakÃ³w</div>
                        </div>

                        <div class="mb-3">
                            <label for="role" class="form-label">Rola *</label>
                            <select class="form-select" id="role" name="role" required>
                                <option value="">Wybierz rolÄ™</option>
                                <option th:each="role : ${roles}"
                                        th:value="${role}"
                                        th:text="${role}"></option>
                            </select>
                        </div>

                        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                            <a href="/admin/users" class="btn btn-secondary me-md-2">Anuluj</a>
                            <button type="submit" class="btn btn-primary">UtwÃ³rz uÅ¼ytkownika</button>
                        </div>
                    </form>

                    <!-- Formularz dla edycji uÅ¼ytkownika -->
                    <form th:if="${user.id != null}" th:action="@{/admin/users/edit/{id}(id=${user.id})}"
                          method="post" th:object="${user}">

                        <div class="mb-3">
                            <label for="username" class="form-label">Nazwa uÅ¼ytkownika *</label>
                            <input type="text" class="form-control" id="username"
                                   th:field="*{username}" required minlength="3" maxlength="50">
                        </div>

                        <div class="mb-3">
                            <label for="email" class="form-label">Email *</label>
                            <input type="email" class="form-control" id="email"
                                   th:field="*{email}" required>
                        </div>

                        <div class="mb-3">
                            <label for="newPassword" class="form-label">Nowe hasÅ‚o (opcjonalnie)</label>
                            <input type="password" class="form-control" id="newPassword"
                                   name="newPassword" minlength="6">
                            <div class="form-text">Zostaw puste, jeÅ›li nie chcesz zmieniaÄ‡ hasÅ‚a</div>
                        </div>

                        <div class="mb-3">
                            <label for="role" class="form-label">Rola *</label>
                            <select class="form-select" id="role" th:field="*{role}" required>
                                <option th:each="role : ${roles}"
                                        th:value="${role}"
                                        th:text="${role}"
                                        th:selected="${role == user.role}"></option>
                            </select>
                        </div>

                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="enabled"
                                   th:field="*{enabled}">
                            <label class="form-check-label" for="enabled">Konto aktywne</label>
                        </div>

                        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                            <a href="/admin/users" class="btn btn-secondary me-md-2">Anuluj</a>
                            <button type="submit" class="btn btn-primary">Zaktualizuj uÅ¼ytkownika</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>


ŒCIE¯KA: src\main\resources\templates\admin\users.html
---------------------------------------------------------
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ZarzÄ…dzanie uÅ¼ytkownikami</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .actions-column {
            width: 250px;
        }
        .status-badge {
            font-size: 0.8em;
        }
    </style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
        <a class="navbar-brand" href="/">ðŸš— Komis Samochodowy</a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
            <div class="navbar-nav">
                <a class="nav-link" href="/samochody">Samochody</a>
                <div class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                        Admin
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="/admin">Panel Admina</a></li>
                        <li><a class="dropdown-item" href="/admin/users">UÅ¼ytkownicy</a></li>
                        <li><a class="dropdown-item" href="/klienci">Klienci</a></li>
                        <li><a class="dropdown-item" href="/pracownicy">Pracownicy</a></li>
                    </ul>
                </div>
            </div>

            <div class="navbar-nav ms-auto">
                <span class="navbar-text me-3">Witaj, <span sec:authentication="name"></span></span>
                <a class="nav-link" href="/admin">Panel Admina</a>
                <a class="nav-link" href="/">Strona GÅ‚Ã³wna</a>
                <a class="nav-link" href="#" th:href="@{/logout}">Wyloguj</a>
            </div>
        </div>
    </div>
</nav>

<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1><i class="fas fa-users-cog"></i> ZarzÄ…dzanie uÅ¼ytkownikami</h1>
        <a href="/admin/users/create" class="btn btn-success">
            <i class="fas fa-user-plus"></i> Dodaj uÅ¼ytkownika
        </a>
    </div>

    <!-- Komunikaty -->
    <div th:if="${successMessage}" class="alert alert-success alert-dismissible fade show" role="alert">
        <i class="fas fa-check-circle"></i>
        <span th:text="${successMessage}"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>

    <div th:if="${errorMessage}" class="alert alert-danger alert-dismissible fade show" role="alert">
        <i class="fas fa-exclamation-triangle"></i>
        <span th:text="${errorMessage}"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>

    <div class="card">
        <div class="card-header">
            <h5 class="mb-0"><i class="fas fa-list"></i> Lista uÅ¼ytkownikÃ³w</h5>
        </div>
        <div class="card-body">
            <div th:if="${users.empty}" class="alert alert-info text-center">
                <i class="fas fa-info-circle"></i> Brak uÅ¼ytkownikÃ³w w systemie.
            </div>

            <div th:if="${!users.empty}" class="table-responsive">
                <table class="table table-striped table-hover">
                    <thead class="table-dark">
                    <tr>
                        <th>ID</th>
                        <th>Nazwa uÅ¼ytkownika</th>
                        <th>Email</th>
                        <th>Rola</th>
                        <th>Status</th>
                        <th>Data utworzenia</th>
                        <th class="actions-column">Akcje</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="user : ${users}">
                        <td th:text="${user.id}"></td>
                        <td>
                            <strong th:text="${user.username}"></strong>
                        </td>
                        <td th:text="${user.email}"></td>
                        <td>
                            <span th:if="${user.role == 'USER'}" class="badge bg-primary" th:text="${user.role}"></span>
                            <span th:if="${user.role == 'ADMIN'}" class="badge bg-success" th:text="${user.role}"></span>
                        </td>
                        <td>
                            <span th:if="${user.enabled}" class="badge bg-success status-badge">Aktywny</span>
                            <span th:if="${!user.enabled}" class="badge bg-danger status-badge">Nieaktywny</span>
                        </td>
                        <td>
                            <small th:text="${#temporals.format(user.createdAt, 'dd.MM.yyyy HH:mm')}"></small>
                        </td>
                        <td>
                            <div class="btn-group btn-group-sm" role="group">
                                <!-- Edycja -->
                                <a th:href="@{/admin/users/edit/{id}(id=${user.id})}"
                                   class="btn btn-outline-primary" title="Edytuj">
                                    <i class="fas fa-edit"></i>
                                </a>

                                <!-- Zmiana hasÅ‚a -->
                                <a th:href="@{/admin/users/change-password/{id}(id=${user.id})}"
                                   class="btn btn-outline-warning" title="ZmieÅ„ hasÅ‚o">
                                    <i class="fas fa-key"></i>
                                </a>

                                <!-- Aktywacja/Dezaktywacja -->
                                <form th:action="@{/admin/users/toggle-status/{id}(id=${user.id})}"
                                      method="post" style="display: inline;">
                                    <button type="submit"
                                            th:classappend="${user.enabled} ? 'btn-outline-warning' : 'btn-outline-success'"
                                            class="btn"
                                            th:title="${user.enabled} ? 'Dezaktywuj' : 'Aktywuj'">
                                        <i th:if="${user.enabled}" class="fas fa-user-slash"></i>
                                        <i th:if="${!user.enabled}" class="fas fa-user-check"></i>
                                    </button>
                                </form>

                                <!-- Usuwanie -->
                                <form th:action="@{/admin/users/delete/{id}(id=${user.id})}"
                                      method="post" style="display: inline;"
                                      onsubmit="return confirm('Czy na pewno chcesz usunÄ…Ä‡ uÅ¼ytkownika ' + [[${user.username}]] + '?')">
                                    <button type="submit" class="btn btn-outline-danger" title="UsuÅ„">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </form>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="mt-3">
        <a href="/admin" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i> PowrÃ³t do panelu admina
        </a>
        <a href="/" class="btn btn-outline-secondary ms-2">
            <i class="fas fa-home"></i> Strona gÅ‚Ã³wna
        </a>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>


ŒCIE¯KA: src\main\resources\templates\fragments\navbar.html
--------------------------------------------------------------
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<div th:fragment="main-nav">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="/">ðŸš— Komis Samochodowy</a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNav">
                <div class="navbar-nav">
                    <a class="nav-link" href="/samochody">Samochody</a>
                    <a class="nav-link" href="/search">
                        <i class="fas fa-search me-1"></i> Wyszukiwanie
                    </a>
                    <div sec:authorize="hasRole('ADMIN')" class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            Admin
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="/admin">Panel Admina</a></li>
                            <li><a class="dropdown-item" href="/admin/users">UÅ¼ytkownicy</a></li>
                            <li><a class="dropdown-item" href="/klienci">Klienci</a></li>
                            <li><a class="dropdown-item" href="/pracownicy">Pracownicy</a></li>
                        </ul>
                    </div>
                </div>

                <div class="navbar-nav ms-auto">
                    <div sec:authorize="isAuthenticated()">
                        <span class="navbar-text me-3">Witaj, <span sec:authentication="name"></span></span>
                        <a class="nav-link" href="#" th:href="@{/logout}">Wyloguj</a>
                    </div>
                    <div sec:authorize="!isAuthenticated()">
                        <a class="nav-link" href="/login">Zaloguj</a>
                        <a class="nav-link" href="/register">Rejestracja</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>
</div>
</html>


ŒCIE¯KA: src\main\resources\templates\fragments\samochod-form-fields.html
----------------------------------------------------------------------------
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<div th:fragment="form-fields">
    <div class="row">
        <div class="col-md-6 mb-3">
            <label for="marka" class="form-label">Marka *</label>
            <input type="text" class="form-control" id="marka"
                   th:field="*{marka}" required>
        </div>

        <div class="col-md-6 mb-3">
            <label for="model" class="form-label">Model *</label>
            <input type="text" class="form-control" id="model"
                   th:field="*{model}" required>
        </div>
    </div>

    <div class="row">
        <div class="col-md-4 mb-3">
            <label for="rokProdukcji" class="form-label">Rok Produkcji *</label>
            <input type="number" class="form-control" id="rokProdukcji"
                   th:field="*{rokProdukcji}" min="1990" max="2025" required>
        </div>

        <div class="col-md-4 mb-3">
            <label for="przebieg" class="form-label">Przebieg (km) *</label>
            <input type="number" class="form-control" id="przebieg"
                   th:field="*{przebieg}" min="0" required>
        </div>

        <div class="col-md-4 mb-3">
            <label for="cena" class="form-label">Cena (PLN) *</label>
            <input type="number" step="0.01" class="form-control" id="cena"
                   th:field="*{cena}" min="0" required>
        </div>
    </div>

    <div class="row">
        <div class="col-md-4 mb-3">
            <label for="kolor" class="form-label">Kolor</label>
            <input type="text" class="form-control" id="kolor"
                   th:field="*{kolor}">
        </div>

        <div class="col-md-4 mb-3">
            <label for="pojemnoscSilnika" class="form-label">PojemnoÅ›Ä‡ silnika</label>
            <input type="number" step="0.1" class="form-control" id="pojemnoscSilnika"
                   th:field="*{pojemnoscSilnika}">
        </div>

        <div class="col-md-4 mb-3">
            <label for="status" class="form-label">Status *</label>
            <select class="form-select" id="status" th:field="*{status}" required>
                <option value="">Wybierz status</option>
                <option value="DOSTEPNY">DostÄ™pny</option>
                <option value="SPRZEDANY">Sprzedany</option>
                <option value="ZAREZERWOWANY">Zarezerwowany</option>
            </select>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6 mb-3">
            <label for="rodzajPaliwa" class="form-label">Rodzaj paliwa</label>
            <select class="form-select" id="rodzajPaliwa" th:field="*{rodzajPaliwa}">
                <option value="Benzyna">Benzyna</option>
                <option value="Diesel">Diesel</option>
                <option value="Hybryda">Hybryda</option>
                <option value="Elektryczny">Elektryczny</option>
            </select>
        </div>

        <div class="col-md-6 mb-3">
            <label for="skrzyniaBiegow" class="form-label">Skrzynia biegÃ³w</label>
            <select class="form-select" id="skrzyniaBiegow" th:field="*{skrzyniaBiegow}">
                <option value="Manualna">Manualna</option>
                <option value="Automatyczna">Automatyczna</option>
            </select>
        </div>
    </div>
</div>
</body>
</html>


ŒCIE¯KA: src\main\resources\templates\samochody\form.html
------------------------------------------------------------
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title th:text="${tytul}">Formularz Samochodu</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
        <a class="navbar-brand" href="/">ðŸš— Komis Samochodowy</a>

        <!-- Dodaj tÄ™ sekcjÄ™ do navbar -->
        <div class="navbar-nav">
            <!-- Link Klienci tylko dla admina -->
            <div sec:authorize="hasRole('ADMIN')">
                <a class="nav-link" th:href="@{/klienci}">Klienci</a>
                <a class="nav-link" th:href="@{/pracownicy}">Pracownicy</a>
            </div>
        </div>

        <div class="navbar-nav ms-auto">
            <span class="navbar-text me-3" sec:authentication="name"></span>
            <a class="nav-link" href="/samochody">PowrÃ³t do listy</a>
            <a class="nav-link" href="#" th:href="@{/logout}">Wyloguj</a>
        </div>
    </div>
</nav>

<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-10">
            <div class="card">
                <div class="card-header">
                    <h4 th:text="${tytul}" class="mb-0">Formularz Samochodu</h4>
                </div>
                <div class="card-body">
                    <!-- Formularz dla nowego samochodu -->
                    <form th:if="${samochod.id == null}" th:action="@{/samochody/zapisz}"
                          method="post" th:object="${samochod}">

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="marka" class="form-label">Marka *</label>
                                <input type="text" class="form-control" id="marka"
                                       th:field="*{marka}" required>
                            </div>

                            <div class="col-md-6 mb-3">
                                <label for="model" class="form-label">Model *</label>
                                <input type="text" class="form-control" id="model"
                                       th:field="*{model}" required>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="rokProdukcji" class="form-label">Rok Produkcji *</label>
                                <input type="number" class="form-control" id="rokProdukcji"
                                       th:field="*{rokProdukcji}" min="1990" max="2025" required>
                            </div>

                            <div class="col-md-4 mb-3">
                                <label for="przebieg" class="form-label">Przebieg (km) *</label>
                                <input type="number" class="form-control" id="przebieg"
                                       th:field="*{przebieg}" min="0" required>
                            </div>

                            <div class="col-md-4 mb-3">
                                <label for="cena" class="form-label">Cena (zÅ‚) *</label>
                                <div class="input-group">
                                    <input type="number" step="0.01" class="form-control" id="cena"
                                           th:field="*{cena}" min="0" required>
                                    <span class="input-group-text">zÅ‚</span>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="kolor" class="form-label">Kolor</label>
                                <input type="text" class="form-control" id="kolor"
                                       th:field="*{kolor}">
                            </div>

                            <div class="col-md-4 mb-3">
                                <label for="pojemnoscSilnika" class="form-label">PojemnoÅ›Ä‡ silnika</label>
                                <div class="input-group">
                                    <input type="number" step="0.1" class="form-control" id="pojemnoscSilnika"
                                           th:field="*{pojemnoscSilnika}">
                                    <span class="input-group-text">L</span>
                                </div>
                            </div>

                            <div class="col-md-4 mb-3">
                                <label for="status" class="form-label">Status *</label>
                                <select class="form-select" id="status" th:field="*{status}" required>
                                    <option value="">Wybierz status</option>
                                    <option value="DOSTEPNY">DostÄ™pny</option>
                                    <option value="SPRZEDANY">Sprzedany</option>
                                    <option value="ZAREZERWOWANY">Zarezerwowany</option>
                                </select>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="rodzajPaliwa" class="form-label">Rodzaj paliwa</label>
                                <select class="form-select" id="rodzajPaliwa" th:field="*{rodzajPaliwa}">
                                    <option value="Benzyna">Benzyna</option>
                                    <option value="Diesel">Diesel</option>
                                    <option value="Hybryda">Hybryda</option>
                                    <option value="Elektryczny">Elektryczny</option>
                                </select>
                            </div>

                            <div class="col-md-6 mb-3">
                                <label for="skrzyniaBiegow" class="form-label">Skrzynia biegÃ³w</label>
                                <select class="form-select" id="skrzyniaBiegow" th:field="*{skrzyniaBiegow}">
                                    <option value="Manualna">Manualna</option>
                                    <option value="Automatyczna">Automatyczna</option>
                                </select>
                            </div>
                        </div>

                        <!-- DODANE: Pole na URL zdjÄ™cia -->
                        <div class="row">
                            <div class="col-md-12 mb-3">
                                <label for="zdjecieUrl" class="form-label">URL zdjÄ™cia</label>
                                <input type="url" class="form-control" id="zdjecieUrl"
                                       th:field="*{zdjecieUrl}" placeholder="https://example.com/obrazek.jpg">
                                <div class="form-text">
                                    Wklej link do zdjÄ™cia samochodu (opcjonalne)
                                </div>
                            </div>
                        </div>

                        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                            <a href="/samochody" class="btn btn-secondary me-md-2">Anuluj</a>
                            <button type="submit" class="btn btn-primary">Zapisz</button>
                        </div>
                    </form>

                    <!-- Formularz dla edycji samochodu -->
                    <form th:if="${samochod.id != null}" th:action="@{/samochody/edytuj(id=${samochod.id})}"
                          method="post" th:object="${samochod}">

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="marka" class="form-label">Marka *</label>
                                <input type="text" class="form-control" id="marka"
                                       th:field="*{marka}" required>
                            </div>

                            <div class="col-md-6 mb-3">
                                <label for="model" class="form-label">Model *</label>
                                <input type="text" class="form-control" id="model"
                                       th:field="*{model}" required>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="rokProdukcji" class="form-label">Rok Produkcji *</label>
                                <input type="number" class="form-control" id="rokProdukcji"
                                       th:field="*{rokProdukcji}" min="1990" max="2025" required>
                            </div>

                            <div class="col-md-4 mb-3">
                                <label for="przebieg" class="form-label">Przebieg (km) *</label>
                                <input type="number" class="form-control" id="przebieg"
                                       th:field="*{przebieg}" min="0" required>
                            </div>

                            <div class="col-md-4 mb-3">
                                <label for="cena" class="form-label">Cena (zÅ‚) *</label>
                                <div class="input-group">
                                    <input type="number" step="0.01" class="form-control" id="cena"
                                           th:field="*{cena}" min="0" required>
                                    <span class="input-group-text">zÅ‚</span>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="kolor" class="form-label">Kolor</label>
                                <input type="text" class="form-control" id="kolor"
                                       th:field="*{kolor}">
                            </div>

                            <div class="col-md-4 mb-3">
                                <label for="pojemnoscSilnika" class="form-label">PojemnoÅ›Ä‡ silnika</label>
                                <div class="input-group">
                                    <input type="number" step="0.1" class="form-control" id="pojemnoscSilnika"
                                           th:field="*{pojemnoscSilnika}">
                                    <span class="input-group-text">L</span>
                                </div>
                            </div>

                            <div class="col-md-4 mb-3">
                                <label for="status" class="form-label">Status *</label>
                                <select class="form-select" id="status" th:field="*{status}" required>
                                    <option value="">Wybierz status</option>
                                    <option value="DOSTEPNY">DostÄ™pny</option>
                                    <option value="SPRZEDANY">Sprzedany</option>
                                    <option value="ZAREZERWOWANY">Zarezerwowany</option>
                                </select>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="rodzajPaliwa" class="form-label">Rodzaj paliwa</label>
                                <select class="form-select" id="rodzajPaliwa" th:field="*{rodzajPaliwa}">
                                    <option value="Benzyna">Benzyna</option>
                                    <option value="Diesel">Diesel</option>
                                    <option value="Hybryda">Hybryda</option>
                                    <option value="Elektryczny">Elektryczny</option>
                                </select>
                            </div>

                            <div class="col-md-6 mb-3">
                                <label for="skrzyniaBiegow" class="form-label">Skrzynia biegÃ³w</label>
                                <select class="form-select" id="skrzyniaBiegow" th:field="*{skrzyniaBiegow}">
                                    <option value="Manualna">Manualna</option>
                                    <option value="Automatyczna">Automatyczna</option>
                                </select>
                            </div>
                        </div>

                        <!-- DODANE: Pole na URL zdjÄ™cia -->
                        <div class="row">
                            <div class="col-md-12 mb-3">
                                <label for="zdjecieUrl" class="form-label">URL zdjÄ™cia</label>
                                <input type="url" class="form-control" id="zdjecieUrl"
                                       th:field="*{zdjecieUrl}" placeholder="https://example.com/obrazek.jpg">
                                <div class="form-text">
                                    Wklej link do zdjÄ™cia samochodu (opcjonalne)
                                </div>
                            </div>
                        </div>

                        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                            <a href="/samochody" class="btn btn-secondary me-md-2">Anuluj</a>
                            <button type="submit" class="btn btn-primary">Zaktualizuj</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>


ŒCIE¯KA: src\main\resources\templates\samochody\lista.html
-------------------------------------------------------------
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Lista SamochodÃ³w - Komis</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .car-image {
            width: 100px;
            height: 75px;
            object-fit: cover;
            border-radius: 5px;
        }
        .no-image {
            width: 100px;
            height: 75px;
            background-color: #f8f9fa;
            border: 1px dashed #dee2e6;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
        }
    </style>
</head>
<body>
<div th:replace="fragments/navbar :: main-nav"></div>

<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>ðŸš— Lista SamochodÃ³w</h1>
        <div>
            <a href="/" class="btn btn-secondary">
                <i class="fas fa-home"></i> Strona GÅ‚Ã³wna
            </a>
            <a sec:authorize="hasRole('ADMIN')" href="/samochody/nowy" class="btn btn-success ms-2">
                <i class="fas fa-plus"></i> Dodaj SamochÃ³d
            </a>
        </div>
    </div>

    <!-- Panel wyszukiwania -->
    <div class="card mb-4">
        <div class="card-header bg-primary text-white">
            <h5 class="mb-0"><i class="fas fa-search me-2"></i>Szybkie wyszukiwanie</h5>
        </div>
        <div class="card-body">
            <form th:action="@{/samochody}" method="get" class="row g-3">
                <div class="col-md-4">
                    <label class="form-label">Marka</label>
                    <select class="form-select" name="marka">
                        <option value="">Wybierz markÄ™</option>
                        <option th:each="marka : ${marki}"
                                th:value="${marka}"
                                th:selected="${searchMarka == marka}"
                                th:text="${marka}"></option>
                    </select>
                </div>
                <div class="col-md-4">
                    <label class="form-label">Model</label>
                    <input type="text" class="form-control" name="model"
                           th:value="${searchModel}" placeholder="Wpisz model">
                </div>
                <div class="col-md-4">
                    <label class="form-label">Status</label>
                    <select class="form-select" name="status">
                        <option value="">Dowolny status</option>
                        <option value="DOSTEPNY" th:selected="${searchStatus == 'DOSTEPNY'}">DostÄ™pny</option>
                        <option value="ZAREZERWOWANY" th:selected="${searchStatus == 'ZAREZERWOWANY'}">Zarezerwowany</option>
                        <option value="SPRZEDANY" th:selected="${searchStatus == 'SPRZEDANY'}">Sprzedany</option>
                    </select>
                </div>
                <div class="col-12">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-search me-1"></i> Szukaj
                    </button>
                    <a href="/samochody" class="btn btn-secondary ms-2">
                        <i class="fas fa-times me-1"></i> WyczyÅ›Ä‡
                    </a>
                    <a href="/search" class="btn btn-outline-primary ms-2">
                        <i class="fas fa-sliders-h me-1"></i> Zaawansowane wyszukiwanie
                    </a>
                </div>
            </form>
        </div>
    </div>

    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead class="table-dark">
            <tr>
                <th>ZdjÄ™cie</th>
                <th>Marka</th>
                <th>Model</th>
                <th>Rok</th>
                <th>Cena</th>
                <th>Przebieg</th>
                <th>Status</th>
                <th>Akcje</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="samochod : ${samochody}">
                <td>
                    <div th:if="${samochod.zdjecieUrl != null and samochod.zdjecieUrl != ''}">
                        <img th:src="${samochod.zdjecieUrl}" alt="ZdjÄ™cie samochodu" class="car-image">
                    </div>
                    <div th:if="${samochod.zdjecieUrl == null or samochod.zdjecieUrl == ''}" class="no-image">
                        <i class="fas fa-car"></i>
                    </div>
                </td>
                <td th:text="${samochod.marka}"></td>
                <td th:text="${samochod.model}"></td>
                <td th:text="${samochod.rokProdukcji}"></td>
                <td>
                    <strong th:text="${#numbers.formatDecimal(samochod.cena, 0, 'COMMA', 2, 'POINT') + ' zÅ‚'}"></strong>
                </td>
                <td th:text="${#numbers.formatInteger(samochod.przebieg, 0, 'COMMA') + ' km'}"></td>
                <td>
                    <span th:if="${samochod.status == 'DOSTEPNY'}" class="badge bg-success">DostÄ™pny</span>
                    <span th:if="${samochod.status == 'SPRZEDANY'}" class="badge bg-danger">Sprzedany</span>
                    <span th:if="${samochod.status == 'ZAREZERWOWANY'}" class="badge bg-warning">Zarezerwowany</span>
                </td>
                <td>
                    <div class="btn-group-vertical btn-group-sm">
                        <a th:href="@{/samochody/szczegoly(id=${samochod.id})}" class="btn btn-outline-primary mb-1">
                            <i class="fas fa-eye"></i> SzczegÃ³Å‚y
                        </a>
                        <div sec:authorize="hasRole('ADMIN')">
                            <a th:href="@{/samochody/edytuj(id=${samochod.id})}" class="btn btn-outline-warning mb-1">
                                <i class="fas fa-edit"></i> Edytuj
                            </a>
                            <form th:action="@{/samochody/usun(id=${samochod.id})}" method="post"
                                  onsubmit="return confirm('Czy na pewno chcesz usunÄ…Ä‡ ten samochÃ³d?')">
                                <button type="submit" class="btn btn-outline-danger w-100">
                                    <i class="fas fa-trash"></i> UsuÅ„
                                </button>
                            </form>
                        </div>
                    </div>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

    <div th:if="${samochody.empty}" class="alert alert-info text-center">
        <i class="fas fa-car fa-2x mb-3"></i><br>
        <span th:if="${hasSearchParams}">Nie znaleziono samochodÃ³w speÅ‚niajÄ…cych podane kryteria.</span>
        <span th:if="${not hasSearchParams}">Brak samochodÃ³w w bazie danych.</span>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>


ŒCIE¯KA: src\main\resources\templates\samochody\szczegoly.html
-----------------------------------------------------------------
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security" lang="">
<head>
    <meta charset="UTF-8">
    <title th:text="${tytul}">SzczegÃ³Å‚y Samochodu</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .car-image-large {
            width: 100%;
            max-width: 600px;
            height: 400px;
            object-fit: cover;
            border-radius: 10px;
        }
        .no-image-large {
            width: 100%;
            max-width: 600px;
            height: 400px;
            background-color: #f8f9fa;
            border: 2px dashed #dee2e6;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
            font-size: 4rem;
        }
        .specs-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
        }
        .price-tag {
            font-size: 2.5rem;
            font-weight: bold;
            color: #28a745;
        }
    </style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
        <a class="navbar-brand" href="/">ðŸš— Komis Samochodowy</a>

        <!-- Dodaj tÄ™ sekcjÄ™ do navbar -->
        <div class="navbar-nav">
            <!-- Link Klienci tylko dla admina -->
            <div sec:authorize="hasRole('ADMIN')">
                <a class="nav-link" th:href="@{/klienci}">Klienci</a>
                <a class="nav-link" th:href="@{/pracownicy}">Pracownicy</a>
            </div>
        </div>

        <div class="navbar-nav ms-auto">
            <div sec:authorize="isAuthenticated()">
                <span class="navbar-text me-3">Witaj, <span sec:authentication="name"></span></span>
                <a class="nav-link d-inline" href="#" th:href="@{/logout}">Wyloguj</a>
            </div>
            <div sec:authorize="!isAuthenticated()">
                <a class="nav-link" href="/login">Zaloguj</a>
            </div>
        </div>
    </div>
</nav>

<div class="container mt-4">
    <div class="row">
        <div class="col-md-8">
            <!-- ZdjÄ™cie samochodu -->
            <div class="text-center mb-4">
                <div th:if="${samochod.zdjecieUrl != null and samochod.zdjecieUrl != ''}">
                    <img th:src="${samochod.zdjecieUrl}"
                         th:alt="${samochod.marka + ' ' + samochod.model}"
                         class="car-image-large shadow">
                </div>
                <div th:if="${samochod.zdjecieUrl == null or samochod.zdjecieUrl == ''}" class="no-image-large">
                    <i class="fas fa-car"></i>
                </div>
            </div>

            <!-- SzczegÃ³Å‚y techniczne -->
            <div class="card mb-4">
                <div class="card-header specs-card">
                    <h4 class="mb-0"><i class="fas fa-cogs me-2"></i>SzczegÃ³Å‚y techniczne</h4>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <table class="table table-borderless">
                                <tr>
                                    <td><strong>Marka:</strong></td>
                                    <td th:text="${samochod.marka}"></td>
                                </tr>
                                <tr>
                                    <td><strong>Model:</strong></td>
                                    <td th:text="${samochod.model}"></td>
                                </tr>
                                <tr>
                                    <td><strong>Rok produkcji:</strong></td>
                                    <td th:text="${samochod.rokProdukcji}"></td>
                                </tr>
                                <tr>
                                    <td><strong>Przebieg:</strong></td>
                                    <td th:text="${#numbers.formatInteger(samochod.przebieg, 0, 'COMMA') + ' km'}"></td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-md-6">
                            <table class="table table-borderless">
                                <tr>
                                    <td><strong>PojemnoÅ›Ä‡ silnika:</strong></td>
                                    <td th:text="${samochod.pojemnoscSilnika + ' L'}"></td>
                                </tr>
                                <tr>
                                    <td><strong>Rodzaj paliwa:</strong></td>
                                    <td th:text="${samochod.rodzajPaliwa}"></td>
                                </tr>
                                <tr>
                                    <td><strong>Skrzynia biegÃ³w:</strong></td>
                                    <td th:text="${samochod.skrzyniaBiegow}"></td>
                                </tr>
                                <tr>
                                    <td><strong>Kolor:</strong></td>
                                    <td th:text="${samochod.kolor}"></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <!-- Panel boczny z cenÄ… i akcjami -->
            <div class="card sticky-top" style="top: 20px;">
                <div class="card-body text-center">
                    <h3 th:text="${samochod.marka + ' ' + samochod.model}"></h3>
                    <div class="price-tag mb-3" th:text="${#numbers.formatDecimal(samochod.cena, 0, 'COMMA', 2, 'POINT') + ' zÅ‚'}"></div>

                    <!-- Status -->
                    <div class="mb-3">
                            <span th:if="${samochod.status == 'DOSTEPNY'}"
                                  class="badge bg-success fs-6" th:text="${samochod.status}"></span>
                        <span th:if="${samochod.status == 'SPRZEDANY'}"
                              class="badge bg-danger fs-6" th:text="${samochod.status}"></span>
                        <span th:if="${samochod.status == 'ZAREZERWOWANY'}"
                              class="badge bg-warning fs-6" th:text="${samochod.status}"></span>
                    </div>

                    <!-- Przyciski akcji dla zalogowanych uÅ¼ytkownikÃ³w -->
                    <div sec:authorize="isAuthenticated() and !hasRole('ADMIN')">
                        <div th:if="${samochod.status == 'DOSTEPNY'}" class="d-grid gap-2">
                            <form th:action="@{/samochody/zarezerwuj(id=${samochod.id})}"
                                  method="post">
                                <button type="submit" class="btn btn-warning btn-lg w-100 mb-2">
                                    <i class="fas fa-clock"></i> Zarezerwuj
                                </button>
                            </form>
                            <form th:action="@{/samochody/kup(id=${samochod.id})}"
                                  method="post"
                                  onsubmit="return confirm('Czy na pewno chcesz kupiÄ‡ ten samochÃ³d?')">
                                <button type="submit" class="btn btn-success btn-lg w-100">
                                    <i class="fas fa-shopping-cart"></i> Kup teraz
                                </button>
                            </form>
                        </div>

                        <div th:if="${samochod.status == 'ZAREZERWOWANY'}" class="d-grid gap-2">
                            <form th:action="@{/samochody/kup(id=${samochod.id})}"
                                  method="post"
                                  onsubmit="return confirm('Czy na pewno chcesz kupiÄ‡ ten samochÃ³d?')">
                                <button type="submit" class="btn btn-success btn-lg w-100 mb-2">
                                    <i class="fas fa-shopping-cart"></i> Kup teraz
                                </button>
                            </form>
                            <form th:action="@{/samochody/anuluj-rezerwacje(id=${samochod.id})}"
                                  method="post">
                                <button type="submit" class="btn btn-secondary btn-lg w-100">
                                    <i class="fas fa-times"></i> Anuluj rezerwacjÄ™
                                </button>
                            </form>
                        </div>

                        <div th:if="${samochod.status == 'SPRZEDANY'}">
                            <div class="alert alert-danger text-center">
                                <i class="fas fa-times-circle"></i><br>
                                Ten samochÃ³d zostaÅ‚ juÅ¼ sprzedany
                            </div>
                        </div>
                    </div>

                    <!-- Komunikat dla niezalogowanych -->
                    <div sec:authorize="!isAuthenticated()">
                        <div class="alert alert-info">
                            <i class="fas fa-info-circle"></i>
                            Aby mÃ³c rezerwowaÄ‡ lub kupowaÄ‡ ten samochÃ³d,
                            <a href="/login" class="alert-link">zaloguj siÄ™</a>.
                        </div>
                        <div th:if="${samochod.status == 'ZAREZERWOWANY'}">
                            <div class="alert alert-warning text-center">
                                <i class="fas fa-clock"></i><br>
                                SamochÃ³d zarezerwowany
                            </div>
                        </div>
                        <div th:if="${samochod.status == 'SPRZEDANY'}">
                            <div class="alert alert-danger text-center">
                                <i class="fas fa-times-circle"></i><br>
                                SamochÃ³d sprzedany
                            </div>
                        </div>
                    </div>

                    <!-- Przyciski admina -->
                    <div sec:authorize="hasRole('ADMIN')" class="d-grid gap-2 mt-3">
                        <a th:href="@{/samochody/edytuj(id=${samochod.id})}"
                           class="btn btn-warning">
                            <i class="fas fa-edit"></i> Edytuj
                        </a>
                        <form th:action="@{/samochody/usun(id=${samochod.id})}"
                              method="post"
                              onsubmit="return confirm('Czy na pewno chcesz usunÄ…Ä‡ ten samochÃ³d?')">
                            <button type="submit" class="btn btn-danger w-100">
                                <i class="fas fa-trash"></i> UsuÅ„
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Przycisk powrotu -->
    <div class="mt-4">
        <a href="/samochody" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i> PowrÃ³t do listy samochodÃ³w
        </a>
        <a href="/" class="btn btn-outline-secondary ms-2">
            <i class="fas fa-home"></i> Strona gÅ‚Ã³wna
        </a>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>


ŒCIE¯KA: src\main\resources\templates\search\form.html
---------------------------------------------------------
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Zaawansowane wyszukiwanie - Komis Samochodowy</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
        <a class="navbar-brand" href="/">ðŸš— Komis Samochodowy</a>
        <div class="navbar-nav ms-auto">
            <a class="nav-link" href="/samochody">PowrÃ³t do listy</a>
            <a class="nav-link" href="/">Strona gÅ‚Ã³wna</a>
        </div>
    </div>
</nav>

<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-10">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0"><i class="fas fa-search me-2"></i>Zaawansowane wyszukiwanie samochodÃ³w</h4>
                </div>
                <div class="card-body">
                    <form th:action="@{/search}" method="post" th:object="${searchCriteria}">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="marka" class="form-label">Marka</label>
                                <select class="form-select" id="marka" th:field="*{marka}">
                                    <option value="">Wybierz markÄ™</option>
                                    <option th:each="marka : ${marki}"
                                            th:value="${marka}"
                                            th:text="${marka}"></option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="model" class="form-label">Model</label>
                                <input type="text" class="form-control" id="model"
                                       th:field="*{model}" placeholder="Wpisz model">
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="minRok" class="form-label">Rok produkcji od</label>
                                <input type="number" class="form-control" id="minRok"
                                       th:field="*{minRok}" min="1990" max="2025" placeholder="np. 2015">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="maxRok" class="form-label">Rok produkcji do</label>
                                <input type="number" class="form-control" id="maxRok"
                                       th:field="*{maxRok}" min="1990" max="2025" placeholder="np. 2020">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="status" class="form-label">Status</label>
                                <select class="form-select" id="status" th:field="*{status}">
                                    <option value="">Dowolny status</option>
                                    <option value="DOSTEPNY">DostÄ™pny</option>
                                    <option value="ZAREZERWOWANY">Zarezerwowany</option>
                                    <option value="SPRZEDANY">Sprzedany</option>
                                </select>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="minPrzebieg" class="form-label">Przebieg od (km)</label>
                                <input type="number" class="form-control" id="minPrzebieg"
                                       th:field="*{minPrzebieg}" min="0" placeholder="np. 0">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="maxPrzebieg" class="form-label">Przebieg do (km)</label>
                                <input type="number" class="form-control" id="maxPrzebieg"
                                       th:field="*{maxPrzebieg}" min="0" placeholder="np. 100000">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="rodzajPaliwa" class="form-label">Rodzaj paliwa</label>
                                <select class="form-select" id="rodzajPaliwa" th:field="*{rodzajPaliwa}">
                                    <option value="">Dowolny</option>
                                    <option value="Benzyna">Benzyna</option>
                                    <option value="Diesel">Diesel</option>
                                    <option value="Hybryda">Hybryda</option>
                                    <option value="Elektryczny">Elektryczny</option>
                                </select>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="minCena" class="form-label">Cena od (zÅ‚)</label>
                                <input type="number" class="form-control" id="minCena"
                                       th:field="*{minCena}" min="0" placeholder="np. 0">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="maxCena" class="form-label">Cena do (zÅ‚)</label>
                                <input type="number" class="form-control" id="maxCena"
                                       th:field="*{maxCena}" min="0" placeholder="np. 100000">
                            </div>
                        </div>

                        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                            <a href="/samochody" class="btn btn-secondary me-md-2">Anuluj</a>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-search me-1"></i> Szukaj
                            </button>
                        </div>
                    </form>

                    <!-- Szybkie wyszukiwanie -->
                    <hr class="my-4">
                    <h5 class="mb-3">Szybkie wyszukiwanie</h5>
                    <form th:action="@{/search/quick}" method="get" class="row g-3">
                        <div class="col-md-4">
                            <select class="form-select" name="marka">
                                <option value="">Wybierz markÄ™</option>
                                <option th:each="marka : ${marki}"
                                        th:value="${marka}"
                                        th:text="${marka}"></option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <input type="text" class="form-control" name="model" placeholder="Model">
                        </div>
                        <div class="col-md-4">
                            <select class="form-select" name="status">
                                <option value="">Status</option>
                                <option value="DOSTEPNY">DostÄ™pny</option>
                                <option value="ZAREZERWOWANY">Zarezerwowany</option>
                            </select>
                        </div>
                        <div class="col-12">
                            <button type="submit" class="btn btn-outline-primary">
                                <i class="fas fa-bolt me-1"></i> Szybkie wyszukiwanie
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>


ŒCIE¯KA: src\main\resources\templates\search\quick-results.html
------------------------------------------------------------------
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Szybkie wyszukiwanie - Komis Samochodowy</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
        <a class="navbar-brand" href="/">ðŸš— Komis Samochodowy</a>
        <div class="navbar-nav ms-auto">
            <a class="nav-link" href="/search">Zaawansowane wyszukiwanie</a>
            <a class="nav-link" href="/samochody">Wszystkie samochody</a>
            <a class="nav-link" href="/">Strona gÅ‚Ã³wna</a>
        </div>
    </div>
</nav>

<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1><i class="fas fa-bolt me-2"></i>Szybkie wyszukiwanie</h1>
        <span class="badge bg-primary fs-6" th:text="'Znaleziono: ' + ${resultsCount} + ' samochodÃ³w'"></span>
    </div>

    <div class="card mb-4">
        <div class="card-header bg-light">
            <h5 class="mb-0">Kryteria wyszukiwania</h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-4" th:if="${searchMarka}">
                    <strong>Marka:</strong> <span th:text="${searchMarka}"></span>
                </div>
                <div class="col-md-4" th:if="${searchModel}">
                    <strong>Model:</strong> <span th:text="${searchModel}"></span>
                </div>
                <div class="col-md-4" th:if="${searchStatus}">
                    <strong>Status:</strong> <span th:text="${searchStatus}"></span>
                </div>
            </div>
        </div>
    </div>

    <div th:if="${samochody.empty}" class="alert alert-info text-center">
        <i class="fas fa-info-circle fa-2x mb-3"></i><br>
        Nie znaleziono samochodÃ³w speÅ‚niajÄ…cych podane kryteria.
        <div class="mt-3">
            <a href="/search" class="btn btn-primary me-2">Zaawansowane wyszukiwanie</a>
            <a href="/samochody" class="btn btn-outline-primary">Zobacz wszystkie samochody</a>
        </div>
    </div>

    <div th:if="${!samochody.empty}" class="table-responsive">
        <table class="table table-striped table-hover">
            <thead class="table-dark">
            <tr>
                <th>Marka</th>
                <th>Model</th>
                <th>Rok</th>
                <th>Przebieg</th>
                <th>Paliwo</th>
                <th>Cena</th>
                <th>Status</th>
                <th>Akcje</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="samochod : ${samochody}">
                <td th:text="${samochod.marka}"></td>
                <td th:text="${samochod.model}"></td>
                <td th:text="${samochod.rokProdukcji}"></td>
                <td th:text="${#numbers.formatInteger(samochod.przebieg, 0, 'COMMA') + ' km'}"></td>
                <td th:text="${samochod.rodzajPaliwa}"></td>
                <td>
                    <strong th:text="${#numbers.formatDecimal(samochod.cena, 0, 'COMMA', 2, 'POINT') + ' zÅ‚'}"></strong>
                </td>
                <td>
                    <span th:if="${samochod.status == 'DOSTEPNY'}" class="badge bg-success">DostÄ™pny</span>
                    <span th:if="${samochod.status == 'SPRZEDANY'}" class="badge bg-danger">Sprzedany</span>
                    <span th:if="${samochod.status == 'ZAREZERWOWANY'}" class="badge bg-warning">Zarezerwowany</span>
                </td>
                <td>
                    <a th:href="@{/samochody/szczegoly(id=${samochod.id})}" class="btn btn-outline-primary btn-sm">
                        <i class="fas fa-eye"></i> SzczegÃ³Å‚y
                    </a>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

    <div class="mt-4">
        <a href="/search" class="btn btn-primary">
            <i class="fas fa-search me-1"></i> Zaawansowane wyszukiwanie
        </a>
        <a href="/samochody" class="btn btn-outline-secondary ms-2">
            <i class="fas fa-list me-1"></i> Wszystkie samochody
        </a>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>


ŒCIE¯KA: src\main\resources\templates\search\results.html
------------------------------------------------------------
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Wyniki wyszukiwania - Komis Samochodowy</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
        <a class="navbar-brand" href="/">ðŸš— Komis Samochodowy</a>
        <div class="navbar-nav ms-auto">
            <a class="nav-link" href="/search">Nowe wyszukiwanie</a>
            <a class="nav-link" href="/samochody">Wszystkie samochody</a>
            <a class="nav-link" href="/">Strona gÅ‚Ã³wna</a>
        </div>
    </div>
</nav>

<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1><i class="fas fa-search me-2"></i>Wyniki wyszukiwania</h1>
        <span class="badge bg-primary fs-6" th:text="'Znaleziono: ' + ${resultsCount} + ' samochodÃ³w'"></span>
    </div>

    <div class="card mb-4">
        <div class="card-header bg-light">
            <h5 class="mb-0">Kryteria wyszukiwania</h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-3" th:if="${searchCriteria.marka}">
                    <strong>Marka:</strong> <span th:text="${searchCriteria.marka}"></span>
                </div>
                <div class="col-md-3" th:if="${searchCriteria.model}">
                    <strong>Model:</strong> <span th:text="${searchCriteria.model}"></span>
                </div>
                <div class="col-md-3" th:if="${searchCriteria.status}">
                    <strong>Status:</strong> <span th:text="${searchCriteria.status}"></span>
                </div>
                <div class="col-md-3" th:if="${searchCriteria.rodzajPaliwa}">
                    <strong>Paliwo:</strong> <span th:text="${searchCriteria.rodzajPaliwa}"></span>
                </div>
            </div>
            <div class="row mt-2">
                <div class="col-md-3" th:if="${searchCriteria.minRok}">
                    <strong>Rok od:</strong> <span th:text="${searchCriteria.minRok}"></span>
                </div>
                <div class="col-md-3" th:if="${searchCriteria.maxRok}">
                    <strong>Rok do:</strong> <span th:text="${searchCriteria.maxRok}"></span>
                </div>
                <div class="col-md-3" th:if="${searchCriteria.minPrzebieg}">
                    <strong>Przebieg od:</strong> <span th:text="${searchCriteria.minPrzebieg} + ' km'"></span>
                </div>
                <div class="col-md-3" th:if="${searchCriteria.maxPrzebieg}">
                    <strong>Przebieg do:</strong> <span th:text="${searchCriteria.maxPrzebieg} + ' km'"></span>
                </div>
            </div>
        </div>
    </div>

    <div th:if="${samochody.empty}" class="alert alert-info text-center">
        <i class="fas fa-info-circle fa-2x mb-3"></i><br>
        Nie znaleziono samochodÃ³w speÅ‚niajÄ…cych podane kryteria.
        <div class="mt-3">
            <a href="/search" class="btn btn-primary me-2">SprÃ³buj ponownie</a>
            <a href="/samochody" class="btn btn-outline-primary">Zobacz wszystkie samochody</a>
        </div>
    </div>

    <div th:if="${!samochody.empty}" class="table-responsive">
        <table class="table table-striped table-hover">
            <thead class="table-dark">
            <tr>
                <th>Marka</th>
                <th>Model</th>
                <th>Rok</th>
                <th>Przebieg</th>
                <th>Paliwo</th>
                <th>Cena</th>
                <th>Status</th>
                <th>Akcje</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="samochod : ${samochody}">
                <td th:text="${samochod.marka}"></td>
                <td th:text="${samochod.model}"></td>
                <td th:text="${samochod.rokProdukcji}"></td>
                <td th:text="${#numbers.formatInteger(samochod.przebieg, 0, 'COMMA') + ' km'}"></td>
                <td th:text="${samochod.rodzajPaliwa}"></td>
                <td>
                    <strong th:text="${#numbers.formatDecimal(samochod.cena, 0, 'COMMA', 2, 'POINT') + ' zÅ‚'}"></strong>
                </td>
                <td>
                    <span th:if="${samochod.status == 'DOSTEPNY'}" class="badge bg-success">DostÄ™pny</span>
                    <span th:if="${samochod.status == 'SPRZEDANY'}" class="badge bg-danger">Sprzedany</span>
                    <span th:if="${samochod.status == 'ZAREZERWOWANY'}" class="badge bg-warning">Zarezerwowany</span>
                </td>
                <td>
                    <a th:href="@{/samochody/szczegoly(id=${samochod.id})}" class="btn btn-outline-primary btn-sm">
                        <i class="fas fa-eye"></i> SzczegÃ³Å‚y
                    </a>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

    <div class="mt-4">
        <a href="/search" class="btn btn-primary">
            <i class="fas fa-search me-1"></i> Nowe wyszukiwanie
        </a>
        <a href="/samochody" class="btn btn-outline-secondary ms-2">
            <i class="fas fa-list me-1"></i> Wszystkie samochody
        </a>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
